(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7908],{65824:function(e,a,n){Promise.resolve().then(n.bind(n,17940))},26995:function(e,a,n){"use strict";var t=n(57437),s=n(16474),r=n(99376),i=n(2265),l=n(20641);a.default=e=>{let{children:a,flags:n}=e,{admin:o,isLoading:d}=(0,l.ZP)(),c=(0,r.useRouter)();return(0,i.useEffect)(()=>{if(!d&&(!o||n.length>0&&!n.some(e=>{var a;return null===(a=o.flags)||void 0===a?void 0:a.includes(e)})))return c.push("/")},[o,d,c,n]),d?(0,t.jsx)(s.c,{}):o?(0,t.jsx)(t.Fragment,{children:a}):(0,t.jsx)(t.Fragment,{children:"No Access"})}},99084:function(e,a,n){"use strict";n.d(a,{r:function(){return d}});var t=n(57437),s=n(34400),r=n(99376),i=n(68656),l=n(38480),o=n(20641);a.default=()=>{let e=(0,r.usePathname)(),a=(0,r.useRouter)(),{admin:n}=(0,o.ZP)(),c=(null==n?void 0:n.flags)||[],u=(0,s.k)(e=>e.modules),m=d.filter(e=>e.permissions.some(e=>c.includes(e))).filter(e=>{if(e.module){let a=u.find(a=>a.identifier===e.module);if(!a||!a.enabled)return!1}return!0});return(0,t.jsx)(i.n,{"aria-label":"Admin-tabs",selectedKey:e,onSelectionChange:e=>a.push(e),items:m,children:e=>(0,t.jsx)(l.r,{title:e.title},e.path)})};let d=[{path:"/admin",title:"Statistics",permissions:["@web/root","@web/logs","@css/root","@web/stats"]},{path:"/admin/modules",title:"Modules",permissions:["@web/root","@css/root"]},{path:"/admin/admins",title:"Manage Admins",permissions:["@web/root","@css/root","@web/admins"]},{path:"/admin/servers",title:"Manage Servers",permissions:["@web/root","@css/root","@web/servers","@web/rcon"]},{path:"/admin/bans",title:"Manage Bans",permissions:["@web/root","@css/root","@web/bans"]},{path:"/admin/mutes",title:"Manage Mutes",permissions:["@web/root","@css/root","@web/mutes"]},{path:"/admin/logs",title:"Logs",permissions:["@web/root","@css/root","@web/logs"]},{path:"/admin/advertisements",title:"Advertisements (module)",permissions:["@web/root","@css/root","@web/logs"],module:"advertisements"},{path:"/admin/settings",title:"Panel Settings",permissions:["@web/root","@css/root"]}]},17940:function(e,a,n){"use strict";n.r(a);var t=n(57437),s=n(99376),r=n(99084),i=n(26995),l=n(36203);a.default=()=>{let e=(0,s.usePathname)(),a=r.r.find(a=>a.path===e);return(0,t.jsx)(i.default,{flags:(null==a?void 0:a.permissions)||[],children:(0,t.jsx)(l.default,{type:"MANAGE"})})}},30054:function(e,a,n){"use strict";var t=n(57437),s=n(8655),r=n(26318),i=n(29721),l=n(35069),o=n(88139),d=n(61639);a.Z=e=>{let{open:a,children:n,action:c,handleClose:u,isLoading:m,actionText:h}=e;return(0,t.jsx)(s.R,{isOpen:a,onOpenChange:!m&&u||void 0,classNames:{backdrop:"z-[20000]",wrapper:"z-[20000]"},children:(0,t.jsx)(r.A,{children:e=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.k,{className:"flex flex-col gap-1",children:"Confirmation"}),(0,t.jsx)(l.I,{children:n}),(0,t.jsxs)(o.R,{children:[(0,t.jsx)(d.A,{color:"primary",variant:"light",onPress:e,isLoading:m,children:"Cancel"}),(0,t.jsx)(d.A,{color:"primary",onPress:c,isLoading:m,children:h||"Confirm"})]})]})})})}},93355:function(e,a,n){"use strict";n.d(a,{Z:function(){return u}});var t=n(57437),s=n(45346),r=n(60387),i=n(42983),l=n(7336),o=n(2265),d=(e,a)=>{(0,o.useEffect)(()=>{let n=n=>{let t=null==e?void 0:e.current;!t||(null==t?void 0:t.contains(n.target))||a(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}},[e,a])},c=n(20641),u=e=>{let{open:a,x:n,y:u,handleCloseMenu:m,items:h}=e,b=(0,o.useRef)(null);d(b,m);let{admin:x}=(0,c.ZP)(),p=null==x?void 0:x.flags,j=h.map(e=>{let{category:a,items:n}=e;return{category:a,items:n.filter(e=>{let{flags:a}=e;return!a||a.some(e=>null==p?void 0:p.includes(e))})}});return a&&(0,t.jsx)(l.E.div,{className:"w-full max-w-[260px] border-small px-1 py-0.5 rounded-small bg-background/40 backdrop-blur-lg border-default-200 absolute z-[20000]",style:{left:n,top:u},ref:b,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.08},"aria-label":"Context menu",children:(0,t.jsx)(s.X,{variant:"flat","aria-label":"Listbox menu with sections",items:h,children:j.map(e=>{let{category:a,items:n}=e;return(0,t.jsx)(r.y,{title:a,"aria-label":a,children:n.map(e=>{let{key:a,description:n,icon:s,color:r,onClick:l}=e;return(0,t.jsx)(i.R,{description:(0,t.jsx)("span",{className:"text-foreground-700",children:n}),startContent:(0,t.jsx)(s,{"aria-label":a}),color:r||"default",onClick:()=>{l&&l(),m()},"aria-label":a,children:a},a)})},a)})})})}},36203:function(e,a,n){"use strict";n.d(a,{default:function(){return J}});var t=n(57437),s=n(47752),r=n(10134),i=n(98486),l=n(94294),o=n(38793),d=n(64087),c=n(67624),u=n(18472),m=n(5565),h=n(74105),b=n(2265),x=n(95502),p=n(2321),j=n(16474),v=n(25308),f=n(99376),g=n(61639),y=n(71931),w=n(68710),N=n(93566),C=n(20564),P=n(59625),A=n(31229);let R=(0,P.Ue)(e=>({action:null,setAction:a=>e({action:a}),isLoading:!1,setIsLoading:a=>e({isLoading:a}),details:null,setDetails:a=>e({details:a}),reset:()=>e({action:null,isLoading:!1,details:null})}));A.z.object({reason:A.z.string()}),A.z.object({reason:A.z.string(),duration:A.z.string()}),A.z.object({comment:A.z.string()}),A.z.object({reason:A.z.string(),duration:A.z.string()}),A.z.enum(["unban","reban","comment","edit","delete"]);var Z=n(80507),_=n(30054),D=n(18200),z=n(93355),T=n(20641),E=n(12600),L=n(69064),S=n(61408),k=n(73173),M=n(8655),I=n(26318),B=n(29721),Y=n(35069),F=n(88139),X=n(64906);let U=A.z.object({player_steamid:A.z.string().optional(),player_ip:A.z.string().optional(),reason:A.z.string().min(3),duration:A.z.string(),comment:A.z.string().optional()});var O=e=>{let{open:a,setOpen:n,mutate:s}=e,[r,i]=(0,b.useState)(!1),l=async()=>{if(!r){i(!0);try{await (0,X.Z)("/api/bans",{method:"POST",data:o.values}),await s(),L.Am.success("Succesfully banned player!"),n(!1)}catch(n){var e;let a=(null==n?void 0:null===(e=n.response)||void 0===e?void 0:e.data)||(null==n?void 0:n.message);console.error(n),L.Am.error("Failed to create ban!\n".concat(a||n))}i(!1)}},o=(0,S.c)({initialValues:{player_steamid:"",player_ip:"",reason:"",duration:"",comment:""},validate:(0,k.F)(U)});return(0,t.jsx)(M.R,{isOpen:a,onOpenChange:r?void 0:n,children:(0,t.jsx)(I.A,{children:e=>(0,t.jsxs)("form",{onSubmit:o.onSubmit(l),children:[(0,t.jsx)(B.k,{className:"flex flex-col gap-1",children:"Create new ban"}),(0,t.jsxs)(Y.I,{children:[(0,t.jsx)("p",{children:"You can ban a player by either their Steam64 / SteamId / Profile URL or their IP address."}),(0,t.jsx)(w.Y,{...o.getInputProps("player_steamid"),errorMessage:o.errors.player_steamid,isInvalid:!!o.errors.player_steamid,label:"Player Steam64 / SteamId / Profile URL",placeholder:"7656XXXXXX",variant:"bordered",isDisabled:r||!!o.values.player_ip,autoFocus:!0}),(0,t.jsx)(w.Y,{...o.getInputProps("player_ip"),errorMessage:o.errors.player_ip,isInvalid:!!o.errors.player_ip,label:"IP Address",placeholder:"1.1.1.1",variant:"bordered",isDisabled:r||!!o.values.player_steamid}),(0,t.jsx)(w.Y,{...o.getInputProps("reason"),errorMessage:o.errors.reason,isInvalid:!!o.errors.reason,label:"Reason (min 3 characters)",placeholder:"Cheating / Griefing / Toxicity / etc.",variant:"bordered",isDisabled:r}),(0,t.jsx)(w.Y,{...o.getInputProps("duration"),errorMessage:o.errors.duration,isInvalid:!!o.errors.duration,label:"Duration in minutes",placeholder:"for example, 60",description:"0 for permanent",variant:"bordered",type:"number",isDisabled:r}),(0,t.jsx)(w.Y,{...o.getInputProps("comment"),errorMessage:o.errors.comment,isInvalid:!!o.errors.comment,label:"Comment (optional)",variant:"bordered",isDisabled:r}),(0,t.jsxs)("div",{className:"flex flex-col text-xs",children:[(0,t.jsxs)("span",{children:["The ban will start now ",(0,t.jsxs)("b",{children:["(",(0,Z.Z)(),")"]})]}),(0,t.jsxs)("span",{children:["and will end at"," ",(0,t.jsx)("b",{children:"0"===o.values.duration?(0,t.jsx)("b",{className:"text-red-700",children:"Permanent"}):(0,Z.Z)(new Date().getTime()+6e4*Number(o.values.duration))})]})]})]}),(0,t.jsxs)(F.R,{children:[(0,t.jsx)(g.A,{color:"danger",variant:"flat",onPress:e,isDisabled:r,children:"Cancel"}),(0,t.jsx)(g.A,{color:"primary",type:"submit",isLoading:r,children:"Ban player"})]})]})})})},V=e=>{switch(e){case"ACTIVE":return(0,t.jsx)(N.z,{color:"danger",size:"sm",variant:"flat",radius:"sm",children:"Active"});case"EXPIRED":return(0,t.jsx)(N.z,{color:"success",size:"sm",variant:"flat",radius:"sm",children:"Expired"});case"UNBANNED":return(0,t.jsx)(N.z,{color:"secondary",size:"sm",variant:"flat",radius:"sm",children:"Removed"});default:return(0,t.jsx)(N.z,{color:"secondary",size:"sm",variant:"flat",radius:"sm",children:"Unknown"})}},W=n(27648),G=n(63861),J=e=>{var a,n;let{type:P}=e,[A,S]=(0,b.useState)(!1),[k,M]=(0,b.useState)(1),[I,B]=(0,b.useState)(""),[Y]=(0,y.Nr)(I,500),F=10;"/"===(0,f.usePathname)()&&(F=5);let{data:U,isLoading:J,mutate:H}=(0,G.ZP)("/api/bans?page=".concat(k,"&rows=").concat(F,"&query=").concat(Y),E.Z,{keepPreviousData:!0}),q=(0,b.useMemo)(()=>(null==U?void 0:U.count)?Math.ceil(U.count/F):0,[null==U?void 0:U.count,F]),{admin:K}=(0,T.ZP)(),{x:Q,y:$,open:ee,handleCloseMenu:ea,handleOpen:en,info:et}=(0,D.Z)(),es=R(e=>e.action),er=R(e=>e.setAction),ei=R(e=>e.details),el=R(e=>e.setDetails),eo=R(e=>e.isLoading),ed=R(e=>e.setIsLoading),ec=R(e=>e.reset),eu=async()=>{if(es&&!eo&&et){ed(!0);try{await X.Z.post("/api/bans/".concat(et.id),{action:es,details:ei}),await H(),ec(),L.ZP.success("Player ".concat(es,"ed successfully"))}catch(e){L.ZP.error("Error ".concat(es," player"))}ed(!1)}},em=(e,a)=>{var n,s,r,i;switch(a){case"player_name":return(0,t.jsx)(W.default,{href:"https://steamcommunity.com/profiles/".concat(e.player_steamid),target:"_blank",passHref:!0,children:(0,t.jsx)(C.z,{avatarProps:{radius:"lg",src:e.player_avatar||""},name:e.player_name,children:null===(n=e.player_name)||void 0===n?void 0:n.slice(0,10)})});case"status":return V(e.status);case"reason":return e.reason.length>10?(0,t.jsx)(v.e,{content:e.reason,"aria-label":"Reason",showArrow:!0,children:(0,t.jsx)("div",{className:"text-xs font-light",children:e.reason.slice(0,10)})}):(0,t.jsx)("div",{className:"text-xs font-light",children:e.reason});case"unban_reason":return e.unban_reason&&e.unban_reason.length>10?(0,t.jsx)(v.e,{content:e.unban_reason,"aria-label":"Remove Reason",showArrow:!0,children:(0,t.jsx)("div",{className:"text-xs font-light",children:null===(s=e.unban_reason)||void 0===s?void 0:s.slice(0,10)})}):(0,t.jsx)("div",{className:"text-xs font-light",children:e.unban_reason});case"duration":return(0,t.jsx)(N.z,{color:"primary",size:"sm",variant:"flat",radius:"sm",children:0===e.duration?"Permanent":"".concat(e.duration," minutes")});case"admin_name":return e.admin_name?"Console"===e.admin_name?(0,t.jsx)(N.z,{color:"danger",size:"sm",variant:"flat",radius:"sm",children:"Console"}):(0,t.jsx)(W.default,{href:"https://steamcommunity.com/profiles/".concat(e.admin_steamid),target:"_blank",passHref:!0,children:(0,t.jsx)(C.z,{avatarProps:{radius:"lg",src:e.admin_avatar||""},name:e.admin_name,children:e.admin_name})}):(0,t.jsx)(t.Fragment,{children:"-"});case"timeLeft":if(0===e.duration)return(0,t.jsx)(N.z,{color:"danger",size:"sm",variant:"flat",radius:"sm",children:"Permanent"});if("UNBANNED"===e.status||"EXPIRED"===e.status)return(0,t.jsx)(p.W,{color:"success",value:100,"aria-label":"Expired"});let l=new Date,o=new Date(e.created),d=new Date(e.ends),c=Math.round((l.getTime()-o.getTime())/(d.getTime()-o.getTime())*100),u=Math.round((d.getTime()-l.getTime())/6e4),m=c<50?"warning":c>=100?"success":"primary";return u>0?(0,t.jsx)(v.e,{content:"".concat(u," minutes left"),color:m,"aria-label":"Time left",showArrow:!0,children:(0,t.jsx)(p.W,{color:m,value:c,"aria-label":"".concat(u," minutes left")})}):(0,t.jsx)(p.W,{color:m,value:c,"aria-label":"Expired"});case"comment":return e.comment?e.comment.length>10?(0,t.jsx)(v.e,{content:e.comment,"aria-label":"Comment",showArrow:!0,children:(0,t.jsx)("div",{className:"text-xs font-light",children:null===(r=e.comment)||void 0===r?void 0:r.slice(0,10)})}):(0,t.jsx)("div",{className:"text-xs font-light",children:null===(i=e.comment)||void 0===i?void 0:i.slice(0,10)}):(0,t.jsx)(t.Fragment,{children:"-"});case"created":return(0,Z.Z)(e.created);default:return(0,t.jsx)(t.Fragment,{})}},eh=(0,t.jsx)(t.Fragment,{});switch(P){case"MANAGE":eh=(0,t.jsxs)(s.J,{children:[(0,t.jsx)(r.j,{"aria-label":"Player",children:"Player"},"player_name"),(0,t.jsx)(r.j,{"aria-label":"Status",children:"Status"},"status"),(0,t.jsx)(r.j,{"aria-label":"Admin",children:"Admin"},"admin_name"),(0,t.jsx)(r.j,{"aria-label":"Reason",children:"Reason"},"reason"),(0,t.jsx)(r.j,{"aria-label":"Remove Reason",children:"Remove Reason"},"unban_reason"),(0,t.jsx)(r.j,{"aria-label":"Date/Time",children:"Date/Time"},"created"),(0,t.jsx)(r.j,{"aria-label":"Duration",children:"Duration"},"duration"),(0,t.jsx)(r.j,{"aria-label":"Time left",children:"Time left"},"timeLeft"),(0,t.jsx)(r.j,{"aria-label":"Comment",children:"Comment"},"comment")]});break;case"SMALL":eh=(0,t.jsxs)(s.J,{children:[(0,t.jsx)(r.j,{"aria-label":"Player",children:"Player"},"player_name"),(0,t.jsx)(r.j,{"aria-label":"Status",children:"Status"},"status"),(0,t.jsx)(r.j,{"aria-label":"Reason",children:"Reason"},"reason"),(0,t.jsx)(r.j,{"aria-label":"Duration",children:"Duration"},"duration"),(0,t.jsx)(r.j,{"aria-label":"Time left",children:"Time left"},"timeLeft")]});break;case"NORMAL":eh=(0,t.jsxs)(s.J,{children:[(0,t.jsx)(r.j,{"aria-label":"Player",children:"Player"},"player_name"),(0,t.jsx)(r.j,{"aria-label":"Status",children:"Status"},"status"),(0,t.jsx)(r.j,{"aria-label":"Admin",children:"Admin"},"admin_name"),(0,t.jsx)(r.j,{"aria-label":"Reason",children:"Reason"},"reason"),(0,t.jsx)(r.j,{"aria-label":"Remove Reason",children:"Remove Reason"},"unban_reason"),(0,t.jsx)(r.j,{"aria-label":"Date/Time",children:"Date/Time"},"created"),(0,t.jsx)(r.j,{"aria-label":"Duration",children:"Duration"},"duration"),(0,t.jsx)(r.j,{"aria-label":"Time left",children:"Time left"},"timeLeft")]})}let eb=["@web/root","@css/root","@web/bans"],ex=(null==K?void 0:null===(a=K.flags)||void 0===a?void 0:a.some(e=>eb.includes(e)))||!1;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.b,{topContent:(0,t.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,t.jsxs)("div",{className:"text-start",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Bans"}),(0,t.jsxs)("code",{className:"text-sm font-normal",children:["total: ",(null==U?void 0:U.count)||""]})]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(v.e,{content:"Search for player name, steamid, IP, reason, etc.",closeDelay:50,color:"primary",delay:400,"aria-label":"Search",children:(0,t.jsx)(w.Y,{label:"Search",labelPlacement:"outside-left",value:I,onValueChange:B,size:"sm",classNames:{mainWrapper:"h-fit",base:"h-fit"},"aria-label":"Search",isClearable:!0})}),K&&ex&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(g.A,{size:"sm",variant:"flat",color:"primary",onClick:()=>S(!0),"aria-label":"New ban",children:[(0,t.jsx)(c.Z,{size:46,"aria-label":"New ban"}),"New ban"]}),(0,t.jsx)(O,{open:A,setOpen:S,mutate:H})]})]})]}),bottomContent:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex w-full justify-center",children:(0,t.jsx)(x.g,{color:"primary",page:k,total:q,onChange:e=>M(e),"aria-label":"Pagination",size:"sm",isCompact:!0,showControls:!0,showShadow:!0})}),K&&"MANAGE"===P&&(0,t.jsx)("span",{className:"text-sm",children:"Tip, your can right click on a player row for more actions"})]}),children:[eh,(0,t.jsx)(l.y,{items:null!==(n=null==U?void 0:U.results)&&void 0!==n?n:[],loadingContent:(0,t.jsx)(j.c,{"aria-label":"Loading"}),loadingState:J?"loading":"idle",children:e=>(0,t.jsx)(o.g,{onContextMenu:a=>K&&en&&en(a,e)||void 0,"aria-label":e.player_name||"",children:a=>(0,t.jsx)(d.X,{"aria-label":a.toString(),children:em(e,a)})},e.id)})]}),K&&(0,t.jsx)(z.Z,{open:ee,x:Q,y:$,handleCloseMenu:ea,items:[{category:"Ban Actions",items:[{key:"Comment",description:"Write a comment on this ban, this will be visible to other admins",icon:u.Z,color:"default",onClick:()=>{er("comment"),el({comment:(null==et?void 0:et.comment)||""})},flags:["@css/root","@web/bans","@web/root"]},{key:(null==et?void 0:et.status)==="UNBANNED"||(null==et?void 0:et.status)==="EXPIRED"?"Reban":"Remove Ban (shorten)",description:(null==et?void 0:et.status)==="UNBANNED"||(null==et?void 0:et.status)==="EXPIRED"?"Reban the player":"Remove the player ban (shorten the duration)",icon:m.Z,color:"default",onClick:()=>{(null==et?void 0:et.status)==="UNBANNED"||(null==et?void 0:et.status)==="EXPIRED"?(er("reban"),el({reason:"",duration:"0"})):(er("unban"),el({reason:""}))},flags:["@css/root","@web/bans","@web/root"]},{key:"Edit Ban",description:"Edit the ban duration or reason",icon:u.Z,color:"primary",onClick:()=>{var e;er("edit"),el({reason:(null==et?void 0:et.reason)||"",duration:(null==et?void 0:null===(e=et.duration)||void 0===e?void 0:e.toString())||"0"})},flags:["@css/root","@web/bans","@web/root"]},{key:"Delete Ban",description:"Delete the ban from the database (permanent action)",icon:h.Z,color:"danger",onClick:()=>{er("delete")},flags:["@css/root","@web/bans","@web/root"]}]}]}),K&&(0,t.jsxs)(_.Z,{open:"comment"===es,handleClose:ec,action:eu,isLoading:eo,actionText:"Save",children:[(0,t.jsx)("div",{children:"Write a comment on this ban, this will be visible to other admins"}),(0,t.jsx)(w.Y,{label:"Comment",value:(null==ei?void 0:ei.comment)||"",onValueChange:e=>el({comment:e}),"aria-label":"Comment"})]}),K&&(0,t.jsxs)(_.Z,{open:"unban"===es,handleClose:ec,action:eu,isLoading:eo,actionText:"Unban",children:[(0,t.jsx)("div",{children:"You sure you want to unban the user?"}),(0,t.jsx)(w.Y,{label:"Reason",value:(null==ei?void 0:ei.reason)||"",onValueChange:e=>el({reason:e}),"aria-label":"Unban Reason"})]}),K&&(0,t.jsxs)(_.Z,{open:"reban"===es,handleClose:ec,action:eu,isLoading:eo,actionText:"Reban",children:[(0,t.jsx)("div",{children:"You sure you want to reban the user?"}),(0,t.jsx)(w.Y,{label:"Reason",value:(null==ei?void 0:ei.reason)||"",onValueChange:e=>el({...ei,reason:e}),"aria-label":"Ban Reason"}),(0,t.jsx)(w.Y,{label:"Time (in minutes)",type:"number",value:(null==ei?void 0:ei.duration)||"",onValueChange:e=>el({...ei,duration:e}),description:"Time in minutes, 0 = Permanent ban","aria-label":"Ban Time"}),(0,t.jsxs)("div",{className:"flex flex-col text-xs",children:[(0,t.jsxs)("span",{children:["The ban will start again at ",(0,t.jsx)("b",{children:(0,Z.Z)()})]}),(0,t.jsxs)("span",{children:["the ban will end at"," ",(0,t.jsx)("b",{children:(null==ei?void 0:ei.duration)==="0"?(0,t.jsx)("b",{className:"text-red-700",children:"Permanent"}):(0,Z.Z)(new Date().getTime()+6e4*Number(null==ei?void 0:ei.duration))})]})]})]}),K&&(0,t.jsxs)(_.Z,{open:"edit"===es,handleClose:ec,action:eu,isLoading:eo,actionText:"Edit",children:[(0,t.jsx)("div",{children:"This will replace the ban duration or reason"}),(0,t.jsx)(w.Y,{label:"Ban Reason",value:(null==ei?void 0:ei.reason)||"",onValueChange:e=>el({...ei,reason:e}),"aria-label":"Ban Reason"}),(0,t.jsx)(w.Y,{label:"Ban Time (in minutes)",type:"number",value:(null==ei?void 0:ei.duration)||"",onValueChange:e=>el({...ei,duration:e}),description:"Time in minutes, this will be added to the current duration, 0 = Permanent ban (will replace the duration)","aria-label":"Ban Time"}),(0,t.jsxs)("div",{className:"flex flex-col text-xs",children:[(0,t.jsxs)("span",{children:["The ban started at ",(0,t.jsx)("b",{children:(0,Z.Z)(null==et?void 0:et.created)})]}),(0,t.jsxs)("span",{children:["After the edit, the ban will end at"," ",(0,t.jsx)("b",{children:(null==ei?void 0:ei.duration)==="0"?(0,t.jsx)("b",{className:"text-red-700",children:"Permanent"}):(0,Z.Z)(new Date((null==et?void 0:et.created)||"").getTime()+6e4*Number(null==ei?void 0:ei.duration))})]})]})]}),K&&(0,t.jsx)(_.Z,{open:"delete"===es,handleClose:ec,action:eu,isLoading:eo,actionText:"Delete",children:(0,t.jsx)("div",{children:"Are you sure you want to delete the ban? this action is permanent and cannot be undone"})})]})}},5565:function(e,a,n){"use strict";n.d(a,{Z:function(){return t}});var t=(0,n(35482).Z)("ban","IconBan",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M5.7 5.7l12.6 12.6",key:"svg-1"}]])},18472:function(e,a,n){"use strict";n.d(a,{Z:function(){return t}});var t=(0,n(35482).Z)("message","IconMessage",[["path",{d:"M8 9h8",key:"svg-0"}],["path",{d:"M8 13h6",key:"svg-1"}],["path",{d:"M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z",key:"svg-2"}]])},12600:function(e,a,n){"use strict";var t=n(64906);a.Z=e=>t.Z.get(e).then(e=>e.data)},80507:function(e,a){"use strict";a.Z=e=>{let a=e?new Date(e):new Date;return a.toLocaleDateString()+" - "+a.toLocaleTimeString()}},20641:function(e,a,n){"use strict";n.d(a,{hY:function(){return l},jc:function(){return o}});var t=n(69064),s=n(63861),r=n(12600),i=n(64906);let l=async()=>{await (0,i.Z)("/api/auth/logout"),await (0,s.JG)("/api/auth"),t.Am.success("Logged out successfully")},o=()=>{let e=window.innerWidth/2-300,a=window.innerHeight/2-400,n=window.open("/api/auth/login/","","toolbar=no, location=no, directories=no, status=no, menubar=no, \n		  scrollbars=no, resizable=yes, copyhistory=no, width=".concat(600,", \n		  height=").concat(800,", top=").concat(a,", left=").concat(e)),r=setInterval(async()=>{n&&n.closed&&(await (0,s.JG)("/api/auth"),t.Am.success("Logged in successfully!"),clearInterval(r))},1e3)};a.ZP=()=>{let{data:e,isLoading:a,error:n}=(0,s.ZP)("/api/auth",r.Z);return e&&e.admin&&e.admin.group&&(e.admin.flags=e.admin.group.flags,e.admin.immunity=e.admin.group.immunity),{user:n||!e?null:e.user,admin:n||!e?null:e.admin,masterAdmin:!n&&!!e&&e.masterAdmin,isLoading:a}}},18200:function(e,a,n){"use strict";var t=n(2265);a.Z=()=>{let[e,a]=(0,t.useState)({open:!1,x:0,y:0,info:void 0});return{x:e.x,y:e.y,open:e.open,handleCloseMenu:()=>{a({...e,open:!1})},handleOpen:(e,n)=>{e.preventDefault();let{pageX:t,pageY:s}=e;a({open:!0,x:t,y:s,info:n})},info:e.info}}},34400:function(e,a,n){"use strict";n.d(a,{k:function(){return o}});var t=n(57437),s=n(2265),r=n(59625),i=n(12600),l=n(63861);let o=(0,r.Ue)(e=>({modules:[],setModules:a=>e(()=>({modules:a,isLoading:!1})),isLoading:!0,setLoading:a=>e(()=>({isLoading:a}))}));a.Z=()=>{let{data:e,isLoading:a}=(0,l.ZP)("/api/modules",i.Z),n=o(e=>e.setModules),r=o(e=>e.setLoading);return(0,s.useEffect)(()=>{e&&(n(e),r(!1))},[e,a,n,r]),(0,t.jsx)(t.Fragment,{})}},60387:function(e,a,n){"use strict";n.d(a,{y:function(){return r}});var t=n(2265);function s(e){return null}s.getCollectionNode=function*(e){let{children:a,title:n,items:s}=e;yield{type:"section",props:e,hasChildNodes:!0,rendered:n,"aria-label":e["aria-label"],*childNodes(){if("function"==typeof a){if(!s)throw Error("props.children was a function but props.items is missing");for(let e of s)yield{type:"item",value:e,renderer:a}}else{let e=[];t.Children.forEach(a,a=>{e.push({type:"item",element:a})}),yield*e}}}};var r=s}},function(e){e.O(0,[3416,384,9064,1639,828,3022,5430,7019,7648,1087,9991,4619,4323,1229,3566,5848,5308,1007,1408,8757,4610,564,4392,8735,2971,2117,1744],function(){return e(e.s=65824)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9899],{67314:function(e,l,s){Promise.resolve().then(s.bind(s,97419))},26995:function(e,l,s){"use strict";var n=s(57437),t=s(16474),a=s(99376),i=s(2265),r=s(20641);l.default=e=>{let{children:l,flags:s}=e,{admin:o,isLoading:c}=(0,r.ZP)(),d=(0,a.useRouter)();return(0,i.useEffect)(()=>{if(!c&&(!o||s.length>0&&!s.some(e=>{var l;return null===(l=o.flags)||void 0===l?void 0:l.includes(e)})))return d.push("/")},[o,c,d,s]),c?(0,n.jsx)(t.c,{}):o?(0,n.jsx)(n.Fragment,{children:l}):(0,n.jsx)(n.Fragment,{children:"No Access"})}},97419:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return S}});var n=s(57437),t=s(16474),a=s(8655),i=s(26318),r=s(29721),o=s(35069),c=s(78551),d=s(61639),u=s(93566),m=s(59625);let h=(0,m.Ue)(e=>({moduleId:null,setModuleId:l=>e({moduleId:l})}));var p=s(12600),f=s(63861),x=()=>{let{data:e}=(0,f.ZP)("/api/admin/modules",p.Z),l=h(e=>e.moduleId),s=h(e=>e.setModuleId),t=(null==e?void 0:e.find(e=>e.identifier===l))||null,m={FREE:null!=t&&!!t.paymentCycle.includes("FREE"),TRIAL:null!=t&&!!t.paymentCycle.includes("TRIAL"),MONTHLY:null!=t&&!!t.paymentCycle.includes("MONTHLY")&&(null==t?void 0:t.monthlyPrice),YEARLY:null!=t&&!!t.paymentCycle.includes("YEARLY")&&(null==t?void 0:t.yearlyPrice),ONE_TIME:null!=t&&!!t.paymentCycle.includes("ONE_TIME")&&(null==t?void 0:t.price)};return(0,n.jsx)(a.R,{isOpen:!!t,onOpenChange:()=>s(null),size:"2xl",children:(0,n.jsx)(i.A,{children:e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.k,{className:"flex flex-col gap-1",children:[null==t?void 0:t.name," module information"]}),(0,n.jsx)(o.I,{children:(0,n.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,n.jsx)("p",{className:"mb-6 text-foreground-600 whitespace-pre-wrap",children:null==t?void 0:t.description}),(0,n.jsx)("span",{className:"font-semibold",children:"Payment cycles:"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2 mb-6 text-foreground-600",children:Object.keys(m).map(e=>{if(m[e])return(0,n.jsx)(u.z,{children:"FREE"===e?"Free":"TRIAL"===e?"Trial":"MONTHLY"===e?"$".concat(m[e]," / Month"):"YEARLY"===e?"$".concat(m[e]," / Year"):"ONE_TIME"===e?"$".concat(m[e]," / One time"):""},e)})}),(0,n.jsxs)(d.A,{color:"primary",className:"mb-4",variant:"flat",onClick:e,fullWidth:!0,children:["Close ",(0,n.jsx)(c.Z,{size:20})]})]})})]})})})};let g=(0,m.Ue)(e=>({moduleId:null,setModuleId:l=>e({moduleId:l}),isLoading:!1,setIsLoading:l=>e({isLoading:l}),method:null,setMethod:l=>e({method:l}),handleClose:()=>e({moduleId:null,isLoading:!1})}));var y=s(68656),j=s(38480),v=s(64906),b=s(69064),E=()=>{let{data:e,mutate:l}=(0,f.ZP)("/api/admin/modules",p.Z),s=g(e=>e.moduleId),t=g(e=>e.isLoading),u=g(e=>e.setIsLoading),m=g(e=>e.handleClose),h=g(e=>e.method),x=g(e=>e.setMethod),E=(null==e?void 0:e.find(e=>e.identifier===s))||null,N={FREE:null!=E&&!!E.paymentCycle.includes("FREE"),TRIAL:null!=E&&!!E.paymentCycle.includes("TRIAL"),MONTHLY:null!=E&&!!E.paymentCycle.includes("MONTHLY")&&(null==E?void 0:E.monthlyPrice),YEARLY:null!=E&&!!E.paymentCycle.includes("YEARLY")&&(null==E?void 0:E.yearlyPrice),ONE_TIME:null!=E&&!!E.paymentCycle.includes("ONE_TIME")&&(null==E?void 0:E.price)},w=async()=>{if(h&&!t){u(!0);try{let e=await v.Z.post("/api/admin/modules",{moduleId:s,method:h});200===e.status&&(window.location.href=e.data),201===e.status&&(await l(),b.ZP.success("Module activated successfully"),m())}catch(e){console.error(e)}finally{u(!1)}}};return(0,n.jsx)(a.R,{isOpen:!!E,onOpenChange:m,size:"lg",children:(0,n.jsx)(i.A,{children:e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.k,{className:"flex flex-col gap-1",children:["Get ",null==E?void 0:E.name," module"]}),(0,n.jsx)(o.I,{children:(0,n.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,n.jsx)("span",{className:"text-sm text-foreground-600",children:"Choose your preferred payment cycle"}),(0,n.jsx)(y.n,{"aria-label":"Servers",selectedKey:h,onSelectionChange:x,isDisabled:t,variant:"bordered",color:"secondary",fullWidth:!0,children:Object.keys(N).map(e=>{if(N[e])return(0,n.jsx)(j.r,{title:"FREE"===e?"Free":"TRIAL"===e?"Trial":"MONTHLY"===e?"$".concat(N[e]," / Month"):"YEARLY"===e?"$".concat(N[e]," / Year"):"ONE_TIME"===e?"$".concat(N[e]," / One time"):""},e)})}),(0,n.jsxs)("p",{className:"my-6",children:["The payment will be processed through PayPal. You can cancel your subscription at any time through your PayPal account.",(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),"- Monthly and yearly subscriptions will be automatically renewed unless canceled, the module will be active as long as the subscription is active.",(0,n.jsx)("br",{}),"- One-time payments will give you lifetime access to the module."]}),(0,n.jsxs)(d.A,{color:"primary",isLoading:t,onClick:w,fullWidth:!0,children:["Get ",null==E?void 0:E.name," module",(0,n.jsx)(c.Z,{size:20})]}),(0,n.jsx)(d.A,{color:"default",className:"mb-4",variant:"flat",isLoading:t,onClick:e,fullWidth:!0,children:"Cancel"})]})})]})})})},N=s(26995),w=s(34308),L=s(94197),A=s(26067),I=s(55294),k=s(99008),M=s(73067),T=s(2265),O=s(27648),C={"player-reports":[{key:"webhook-url",label:"Webhook URL",description:"The URL of the Discord webhook to send the logs to",type:"string",default:""},{key:"webhook-message",label:"Webhook Message",description:"The message to send with the Discord webhook",type:"string",default:""}],"welcome-popup":[{key:"picture",label:"Banner / Picture",description:"The URL of the picture to show in the welcome popup",type:"string",default:""},{key:"title",label:"Title",description:"The popup header title",type:"string",default:""},{key:"buttonText",label:"Button Text",type:"string",default:""},{key:"message",label:"Message",description:"The message to show in the welcome popup, can be HTML code or plain text",type:"code",default:"<h1>Welcome!</h1>"}]};let R=(0,m.Ue)(e=>({moduleId:null,setModuleId:l=>e({moduleId:l})}));var Z=e=>{var l,s;let{name:t,description:a,identifier:i,paymentCycle:r,version:o,monthlyPrice:m,price:p,yearlyPrice:x,enabled:E,license:N,showcase:Z}=e,Y=g(e=>e.setModuleId),P=h(e=>e.setModuleId),D=R(e=>e.setModuleId),[z,S]=(0,T.useState)(E?"ENABLED":"DISABLED"),[F,_]=(0,T.useState)(!1),W=async e=>{if(!F&&(!E||"ENABLED"!==e)&&(E||"DISABLED"!==e)){_(!0),S(e);try{await v.Z.put("/api/admin/modules/".concat(i),{status:e}),await (0,f.JG)("/api/admin/modules"),await (0,f.JG)("/api/modules"),b.ZP.success("Module status changed successfully.")}catch(e){console.error(e),b.ZP.error("An error occurred while changing the module status.")}_(!1)}},H={FREE:!!r.includes("FREE"),TRIAL:!!r.includes("TRIAL"),MONTHLY:!!r.includes("MONTHLY")&&m,YEARLY:!!r.includes("YEARLY")&&x,ONE_TIME:!!r.includes("ONE_TIME")&&p};return(0,n.jsx)(I.w,{children:(0,n.jsxs)(k.G,{className:"grid grid-cols-12 gap-8 min-h-[200px]",children:[(0,n.jsx)(O.default,{className:"col-span-4",target:"_blank",href:Z||"",children:(0,n.jsx)(M.J,{alt:t,className:"aspect-video w-full h-full object-cover bg-center",classNames:{wrapper:"h-full"},src:Z,shadow:"md",height:"100%",width:"100%"})}),(0,n.jsxs)("div",{className:"col-span-8 flex flex-col gap-4 justify-between h-full",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("h3",{className:"text-3xl font-semibold",children:t}),(0,n.jsxs)("span",{className:"text-xs font-thin text-foreground",children:["Version ",o]}),(0,n.jsx)("p",{className:"text-sm text-foreground/80",children:a.slice(0,180)})]}),(0,n.jsxs)("div",{className:"flex justify-between items-end",children:[N?(null==C?void 0:null===(l=C[i])||void 0===l?void 0:l.length)>0?(0,n.jsxs)(d.A,{variant:"flat",size:"sm",isDisabled:!((null==C?void 0:null===(s=C[i])||void 0===s?void 0:s.length)>0),onClick:()=>D(i),children:[(0,n.jsx)(w.Z,{size:14}),"Settings"]}):(0,n.jsx)("div",{}):(0,n.jsx)("div",{className:"flex gap-2 text-xs text-foreground/80",children:Object.keys(H).map(e=>{if(H[e])return(0,n.jsx)(u.z,{size:"sm",children:"FREE"===e?"Free":"TRIAL"===e?"Trial":"MONTHLY"===e?"$".concat(H[e]," / Month"):"YEARLY"===e?"$".concat(H[e]," / Year"):"ONE_TIME"===e?"$".concat(H[e]," / One time"):null},e)})}),N?(0,n.jsx)("div",{className:"flex gap-2 items-center",children:(0,n.jsxs)(y.n,{"aria-label":"Servers",selectedKey:z,color:"ENABLED"===z?"success":"danger",onSelectionChange:W,isDisabled:F,variant:"solid",size:"sm",fullWidth:!0,children:[(0,n.jsx)(j.r,{title:(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,n.jsx)(L.Z,{size:14}),"Disabled"]})},"DISABLED"),(0,n.jsx)(j.r,{title:(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,n.jsx)(A.Z,{size:14}),"Enabled"]})},"ENABLED")]})}):(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(d.A,{variant:"flat",color:"secondary",onClick:()=>P(i),size:"sm",children:"More info"}),(0,n.jsxs)(d.A,{variant:"solid",color:"primary",onClick:()=>Y(i),size:"sm",children:["Get module",(0,n.jsx)(c.Z,{size:14})]})]})]})]})]})})},Y=s(72694),P=s(68710),D=s(6341),z=()=>{let{data:e,mutate:l}=(0,f.ZP)("/api/admin/modules",p.Z),s=R(e=>e.moduleId),t=R(e=>e.setModuleId),u=(null==e?void 0:e.find(e=>e.identifier===s))||null,m=(0,T.useMemo)(()=>(null==u?void 0:u.settings)||{},[u]),h=(0,T.useMemo)(()=>s&&C[s]||[],[s]),x=(0,T.useMemo)(()=>h.map(e=>{let{key:l}=e,s=h.find(e=>e.key===l);if(!s)return;let n=m[l]||s.default;return{...s,value:n}}).filter(e=>void 0!==e),[m,h]),[g,y]=(0,T.useState)({}),[j,E]=(0,T.useState)(!1);(0,T.useEffect)(()=>{let e={};x.forEach(l=>{e[l.key]=l.value}),y(e)},[x]);let N=async e=>{if(e.preventDefault(),s&&!j){E(!0);try{await v.Z.patch("/api/admin/modules/".concat(s),{settings:g}),await l(),await (0,f.JG)("/api/modules"),b.ZP.success("Settings saved successfully."),t(null)}catch(e){console.error(e),b.ZP.error("An error occurred while saving the settings.")}finally{E(!1)}}},w=(0,T.useMemo)(()=>Object.keys(g).some(e=>g[e]!==m[e]),[g,m]),[L,A]=(0,Y._)("welcome-popup",0),I=()=>A(0);return(0,n.jsx)(a.R,{isOpen:!!u,onOpenChange:()=>t(null),isDismissable:!w,size:"3xl",children:(0,n.jsx)(i.A,{children:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.k,{className:"flex flex-col gap-1",children:[null==u?void 0:u.name," Settings"]}),(0,n.jsx)(o.I,{children:(0,n.jsxs)("form",{className:"flex flex-col items-start gap-2",onSubmit:N,children:[h.map(e=>{switch(e.type){case"string":return(0,T.createElement)(P.Y,{...e,key:e.key,value:g[e.key],onChange:l=>y({...g,[e.key]:l.target.value}),isDisabled:j});case"code":return(0,n.jsx)(D.Z,{...e,value:g[e.key],setValue:l=>y({...g,[e.key]:l}),disabled:j,example:'<h1 style="font-size: 50px">Welcome!</h1>',lang:"html",height:250})}}),"welcome-popup"===s&&(0,n.jsx)(d.A,{className:"primary",variant:"solid",color:"primary",onClick:I,fullWidth:!0,children:"Show Popup (make sure to save the changes before!)"}),(0,n.jsxs)(d.A,{color:"primary",className:"mb-4 mt-8",type:"submit",isLoading:j,isDisabled:!w,fullWidth:!0,children:["Save ",(0,n.jsx)(c.Z,{size:20})]})]})})]})})})},S=()=>{let{data:e,isLoading:l}=(0,f.ZP)("/api/admin/modules",p.Z);return(0,n.jsx)(N.default,{flags:["@css/root","@web/root"],children:l?(0,n.jsx)(t.c,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"grid grid-cols-2 gap-4",children:e?e.map(e=>(0,n.jsx)(Z,{...e},e.identifier)):(0,n.jsx)(n.Fragment,{children:"An error occurred while fetching the modules. Please try again later."})}),(0,n.jsx)(E,{}),(0,n.jsx)(x,{}),(0,n.jsx)(z,{})]})})}},6341:function(e,l,s){"use strict";var n=s(57437),t=s(61639),a=s(22289),i=s(69064);l.Z=e=>{let{value:l,setValue:s,lang:r,example:o,disabled:c,label:d,height:u}=e;return(0,n.jsxs)("div",{className:"relative w-full h-full flex flex-col gap-2",children:[d&&(0,n.jsx)("h3",{className:"text-xl font-medium mb-2",children:d}),(0,n.jsx)(a.ZP,{height:u||400,defaultLanguage:r,className:"!rounded-md overflow-hidden",theme:"vs-dark",value:l,onChange:!c&&s||(()=>{}),options:{inlineSuggest:{enabled:!0},fontSize:16,formatOnType:!0,autoClosingBrackets:"always",autoSurround:"languageDefined",automaticLayout:!0,autoIndent:"full",autoClosingQuotes:"always"}}),o&&(0,n.jsx)(t.A,{onClick:()=>{if(o){if(l&&""!==l.trim())return i.ZP.error("Editor must be empty to paste example");s(o)}},disabled:c,variant:"flat",color:"primary",children:"Paste Example"})]})}},12600:function(e,l,s){"use strict";var n=s(64906);l.Z=e=>n.Z.get(e).then(e=>e.data)},20641:function(e,l,s){"use strict";s.d(l,{hY:function(){return r},jc:function(){return o}});var n=s(69064),t=s(63861),a=s(12600),i=s(64906);let r=async()=>{await (0,i.Z)("/api/auth/logout"),await (0,t.JG)("/api/auth"),n.Am.success("Logged out successfully")},o=()=>{let e=window.innerWidth/2-300,l=window.innerHeight/2-400,s=window.open("/api/auth/login/","","toolbar=no, location=no, directories=no, status=no, menubar=no, \n		  scrollbars=no, resizable=yes, copyhistory=no, width=".concat(600,", \n		  height=").concat(800,", top=").concat(l,", left=").concat(e)),a=setInterval(async()=>{s&&s.closed&&(await (0,t.JG)("/api/auth"),n.Am.success("Logged in successfully!"),clearInterval(a))},1e3)};l.ZP=()=>{let{data:e,isLoading:l,error:s}=(0,t.ZP)("/api/auth",a.Z);return e&&e.admin&&e.admin.group&&(e.admin.flags=e.admin.group.flags,e.admin.immunity=e.admin.group.immunity),{user:s||!e?null:e.user,admin:s||!e?null:e.admin,masterAdmin:!s&&!!e&&e.masterAdmin,isLoading:l}}}},function(e){e.O(0,[3416,384,9064,1639,828,3022,5430,7019,7648,1087,9991,4619,8811,3566,2694,276,3408,2971,2117,1744],function(){return e(e.s=67314)}),_N_E=e.O()}]);
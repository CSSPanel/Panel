(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3853],{4154:function(e,s,i){Promise.resolve().then(i.bind(i,6694))},7512:function(e,s,i){"use strict";i.r(s);var a=i(1840),r=i(7917),n=i(1318),t=i(4740),l=i(646);s.default=e=>{let{children:s,flags:i}=e,{admin:d,isLoading:o}=(0,l.ZP)(),c=(0,n.useRouter)();return(0,t.useEffect)(()=>{if(!o){if(!d)return c.push("/");if(i.length>0&&!i.some(e=>{var s;return null===(s=d.flags)||void 0===s?void 0:s.includes(e)}))return c.push("/admin")}},[d,o,c,i]),o?(0,a.jsx)(r.c,{}):d?(0,a.jsx)(a.Fragment,{children:s}):(0,a.jsx)(a.Fragment,{children:"No Access"})}},8136:function(e,s,i){"use strict";i.r(s),i.d(s,{ADMIN_TABS:function(){return l}});var a=i(1840),r=i(1318),n=i(994),t=i(986);s.default=()=>{let e=(0,r.usePathname)(),s=(0,r.useRouter)();return(0,a.jsx)(n.n,{"aria-label":"Admin-tabs",selectedKey:e,onSelectionChange:e=>s.push(e),items:l,children:e=>(0,a.jsx)(t.r,{title:e.title},e.path)})};let l=[{path:"/admin",title:"Statistics",permissions:[]},{path:"/admin/admins",title:"Manage Admins",permissions:["@web/root","@css/root","@web/admins"]},{path:"/admin/servers",title:"Manage Servers",permissions:["@web/root","@css/root","@web/servers"]},{path:"/admin/bans",title:"Manage Bans",permissions:["@web/root","@css/root","@web/bans"]},{path:"/admin/mutes",title:"Manage Mutes",permissions:["@web/root","@css/root","@web/mutes"]},{path:"/admin/logs",title:"Logs",permissions:["@web/root","@css/root","@web/logs"]},{path:"/admin/settings",title:"Panel Settings",permissions:["@web/root","@css/root"]}]},6694:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return ec}});var a=i(1840),r=i(5458),n=i(673),t=i(1070),l=i(776),d=i(165),o=(0,i(2419).tv)({base:["px-2","py-1","h-fit","font-mono","font-normal","inline-block","whitespace-nowrap"],variants:{color:{default:d.J.flat.default,primary:d.J.flat.primary,secondary:d.J.flat.secondary,success:d.J.flat.success,warning:d.J.flat.warning,danger:d.J.flat.danger},size:{sm:"text-small",md:"text-medium",lg:"text-large"},radius:{none:"rounded-none",sm:"rounded-small",md:"rounded-medium",lg:"rounded-large",full:"rounded-full"}},defaultVariants:{color:"default",size:"sm",radius:"sm"}}),c=i(6840),u=i(4740),m=(0,c.Gp)((e,s)=>{let{Component:i,children:r,getCodeProps:n}=function(e){let[s,i]=(0,c.oe)(e,o.variantKeys),{as:a,children:r,className:n,...t}=s,l=(0,u.useMemo)(()=>o({...i,className:n}),[...Object.values(i),n]);return{Component:a||"code",children:r,getCodeProps:()=>({className:l,...t})}}({...e});return(0,a.jsx)(i,{ref:s,...n(),children:r})});m.displayName="NextUI.Code";var h=i(1160),p=i(994),g=i(986),f=i(1318),v=i(8136),x=i(995),b=i(1174),j=i(6374),y=i(6637),w=i(181),A=i(8332),S=i(4620),F=i(4591),z=i(9919),N=i(8659),C=i(7917),_=i(2573),k=i(5023),P=i(917),W=i(175),D=i(772),E=i(646),M=i(8787);let Z=(0,M.Ue)(e=>({open:!1,setOpen:s=>e({open:s,edit:null}),edit:null,setEdit:s=>e({edit:s,open:!0}),delete:null,setDelete:s=>e({delete:s}),servers:[],setServers:s=>e({servers:s})}));var G=i(3910),I=i(1916),O=()=>{var e;let s=Z(e=>e.setServers),{admin:i}=(0,E.ZP)(),{data:r,isLoading:n}=(0,P.ZP)("/api/admin/admins",W.Z);(0,u.useEffect)(()=>{var e;r&&s(null!==(e=null==r?void 0:r.servers)&&void 0!==e?e:[])},[r,s]);let t=Z(e=>e.setEdit),d=Z(e=>e.delete),o=Z(e=>e.setDelete),c=async()=>{if(d){try{await (0,I.Z)("/api/admin/admins/".concat(d.id),{method:"DELETE"}),_.Am.success("Succesfully deleted admin!"),await (0,P.JG)("/api/admin/admins"),await (0,P.JG)("/api/admin/groups")}catch(s){var e;_.Am.error(null!==(e=s.response.data)&&void 0!==e?e:"Failed to delete admin!")}o(null)}},m=!n&&(null==r?void 0:r.servers)&&(null==r?void 0:r.admins)?"idle":"loading",h=(e,s)=>{switch(s){case"id":return(0,a.jsx)(k.z,{variant:"flat",size:"sm",children:e.id});case"group":{let s="string"==typeof e.flags&&e.flags.startsWith("#")?null==r?void 0:r.groups.find(s=>s.id===e.flags):null;return s?(0,a.jsxs)(a.Fragment,{children:[s.name," (",s.id,")"]}):(0,a.jsx)(a.Fragment,{children:"-"})}case"server":{var n;if(!e.server_id)return(0,a.jsx)(a.Fragment,{children:"ALL"});if(e.server_id.length>1){let s=e.server_id.map(e=>{var s;return null==r?void 0:null===(s=r.servers.find(s=>s.id.toString()===e))||void 0===s?void 0:s.hostname});return(0,a.jsx)(N.e,{content:s.join("\n"),className:"whitespace-pre-wrap",closeDelay:50,color:"primary",children:(0,a.jsxs)(k.z,{variant:"flat",size:"sm",color:"primary",children:[s.length," Servers"]})})}let s=null==r?void 0:r.servers.find(s=>s.id==(e.server_id||0));return(0,a.jsx)(k.z,{variant:"flat",size:"sm",children:null!==(n=null==s?void 0:s.hostname)&&void 0!==n?n:"Unknown"})}case"player_name":return(0,a.jsx)("div",{children:e.player_name});case"player_steamid":return(0,a.jsx)(G.default,{href:"https://steamcommunity.com/profiles/".concat(e[s]),target:"_blank",children:e.player_steamid});case"flags":let d="string"==typeof e.flags&&e.flags.startsWith("#")?null==r?void 0:r.groups.find(s=>s.id===e.flags):null,c=d?d.flags:e.flags,u=c&&"object"==typeof c?c.join(", "):c,m=c&&"object"==typeof c?c.join("\n"):u,h="string"==typeof u?u.split(", "):u,p=h.filter(e=>e.startsWith("@web")),g=h.filter(e=>e.startsWith("@css"));return d?(0,a.jsx)(N.e,{content:m,closeDelay:50,color:"secondary",className:"whitespace-pre-wrap",children:(0,a.jsxs)(k.z,{variant:"flat",size:"sm",color:"secondary",children:[h.length," Flags from ",null==d?void 0:d.name]})}):e.flags.length>2?(0,a.jsxs)("div",{className:"flex flex-row gap-2",children:[p.length?(0,a.jsx)(N.e,{content:p.join("\n"),closeDelay:50,color:"primary",className:"whitespace-pre-wrap",children:(0,a.jsxs)(k.z,{variant:"flat",size:"sm",color:"primary",children:[p.length," Web Flags"]})}):(0,a.jsx)(a.Fragment,{}),g.length?(0,a.jsx)(N.e,{content:g.join("\n"),closeDelay:50,color:"secondary",className:"whitespace-pre-wrap",children:(0,a.jsxs)(k.z,{variant:"flat",size:"sm",color:"secondary",children:[g.length," Admin Flags"]})}):(0,a.jsx)(a.Fragment,{})]}):(0,a.jsx)(k.z,{variant:"flat",size:"sm",children:h.join(", ")});case"immunity":return(0,a.jsx)(k.z,{variant:"flat",size:"sm",children:e.immunity});case"ends":return e.ends?(0,z.Q)(new Date(e.ends)):"Never";case"actions":let f=Number(i.immunity)<=Number(e.immunity);return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(l.A,{size:"sm",variant:"flat",color:"primary",onClick:()=>t(e),isDisabled:f,children:[(0,a.jsx)(S.Z,{size:16}),"Edit Admin"]}),(0,a.jsxs)(l.A,{size:"sm",variant:"flat",color:"danger",onClick:()=>o(e),isDisabled:f,children:[(0,a.jsx)(F.Z,{size:16}),"Delete Admin"]})]});default:return(0,a.jsx)(a.Fragment,{children:"Error!"})}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(x.b,{children:[(0,a.jsxs)(b.J,{children:[(0,a.jsx)(j.j,{children:"ID"},"id"),(0,a.jsx)(j.j,{children:"Name"},"player_name"),(0,a.jsx)(j.j,{children:"SteamId"},"player_steamid"),(0,a.jsx)(j.j,{children:"Group"},"group"),(0,a.jsx)(j.j,{children:"Servers"},"server"),(0,a.jsx)(j.j,{children:"Immunity"},"immunity"),(0,a.jsx)(j.j,{children:"Flags / Group"},"flags"),(0,a.jsx)(j.j,{children:"Ends"},"ends"),(0,a.jsx)(j.j,{children:"Actions"},"actions")]}),(0,a.jsx)(y.y,{loadingContent:(0,a.jsx)(C.c,{}),loadingState:m,isLoading:"loading"===m,items:null!==(e=null==r?void 0:r.admins)&&void 0!==e?e:[],children:e=>(0,a.jsx)(w.g,{children:s=>(0,a.jsx)(A.X,{children:h(e,s)})})})]}),(0,a.jsx)(D.Z,{open:!!d,onAction:c,onCancel:()=>o(null),title:"Delete admin",text:(0,a.jsxs)("p",{children:["Are you sure you want to delete: ",(0,a.jsx)("b",{children:null==d?void 0:d.player_name})," admin?"]})})]})},V=i(5370),J=i(7670),B=i(7040),L=i(964),R=i(7743),T=i(8826),K=i(9954),Y=i(8750),U=i(8668),H=i(4406),X=i(9609),Q=i(7463),$=i(8259),q=i(1326);let ee=[{id:"@css/reservation",description:"Reserved slot access."},{id:"@css/generic",description:"Generic admin."},{id:"@css/kick",description:"Kick other players."},{id:"@css/ban",description:"Ban other players."},{id:"@css/unban",description:"Remove bans."},{id:"@css/vip",description:"General vip status."},{id:"@css/slay",description:"Slay/harm other players."},{id:"@css/changemap",description:"Change the map or major gameplay features."},{id:"@css/cvar",description:"Change most cvars."},{id:"@css/config",description:"Execute config files."},{id:"@css/chat",description:"Special chat privileges."},{id:"@css/vote",description:"Start or create votes."},{id:"@css/password",description:"Set a password on the server."},{id:"@css/rcon",description:"Use RCON commands."},{id:"@css/cheats",description:"Change sv_cheats or use cheating commands."},{id:"@css/root",description:"Magically enables all flags and ignores immunity values."},{id:"@web/root",description:"Web panel root access."},{id:"@web/admins",description:"Manage web admins."},{id:"@web/admingroups",description:"Manage web admin groups."},{id:"@web/bans",description:"Manage bans."},{id:"@web/mutes",description:"Manage mutes."},{id:"@web/logs",description:"View panel logs."},{id:"@web/stats",description:"View server statistics."},{id:"@web/servers",description:"Manage servers."}],es=ee.map(e=>e.id),ei=q.z.string().refine(e=>es.includes(e)||e.startsWith("#"),{message:"The flag is not valid"}),ea=q.z.object({player_name:q.z.string().min(3).regex(/^[\w\s]+$/),player_steamid:q.z.string().regex(/^7656119\d{10}$/),server_id:q.z.array(q.z.string()).nullable(),flags:q.z.union([q.z.array(ei),ei]),immunity:q.z.string().min(0).max(100)});var er=()=>{var e,s,i;let r=Z(e=>e.open),n=Z(e=>e.edit),t=Z(e=>e.setOpen),d=Z(e=>e.servers),{admin:o}=(0,E.ZP)(),[c,m]=(0,u.useState)(!n||!n.server_id),[h,p]=(0,u.useState)(!1),{data:g}=(0,P.ZP)("/api/admin/admins",W.Z),f=async()=>{if(!h){p(!0);try{await (0,I.Z)(n?"/api/admin/admins/".concat(n.id):"/api/admin/admins",{method:n?"PUT":"POST",data:{...v.values,server_id:c?null:v.values.server_id}}),await (0,P.JG)("/api/admin/admins"),_.Am.success(n?"Succesfully edited admin!":"Succesfully created admin!"),t(!1)}catch(e){console.error(e),_.Am.error("Failed to ".concat(n?"edit":"create"," admin!"))}p(!1)}},v=(0,V.c)({initialValues:{player_name:n?n.player_name:"",player_steamid:n?n.player_steamid:"",server_id:n?n.server_id:null,flags:n?n.flags:[],immunity:n?n.immunity:"0"},validate:(0,J.F)(ea)});(0,u.useEffect)(()=>{v.setValues({player_name:n?n.player_name:"",player_steamid:n?n.player_steamid:"",server_id:n?n.server_id:null,flags:n?n.flags:[],immunity:n?n.immunity:"0"}),m(!n||!n.server_id)},[n]);let x="string"==typeof v.values.flags&&v.values.flags.startsWith("#")&&null!==(s=null==g?void 0:g.groups.find(e=>e.id===v.values.flags))&&void 0!==s?s:void 0,b="string"!=typeof v.values.flags?v.values.flags.join(", "):void 0,j=v.values.server_id?v.values.server_id.length>1?v.values.server_id.length:null!==(i=null===(e=d.find(e=>e.id.toString()===v.values.server_id[0]))||void 0===e?void 0:e.hostname)&&void 0!==i?i:"None":"All";return(0,a.jsx)(B.R,{isOpen:r,onOpenChange:h?void 0:t,children:(0,a.jsx)(L.A,{children:e=>{var s,i,r,t;return(0,a.jsxs)("form",{onSubmit:v.onSubmit(f),children:[(0,a.jsx)(R.k,{className:"flex flex-col gap-1",children:n?"Edit admin":"Create new admin"}),(0,a.jsxs)(T.I,{children:[(0,a.jsx)(Q.Y,{...v.getInputProps("player_name"),errorMessage:v.errors.player_name,label:"Admin Name",placeholder:"John Doe",variant:"bordered",disabled:h,autoFocus:!0}),(0,a.jsx)(Q.Y,{...v.getInputProps("player_steamid"),errorMessage:v.errors.player_steamid,label:"SteamId (64)",placeholder:"76561198000000000",type:"text",variant:"bordered",disabled:h}),(0,a.jsx)($.K,{isSelected:c,onValueChange:m,children:"All Servers"}),(0,a.jsxs)(Y.F,{children:[(0,a.jsx)(U.S,{children:(0,a.jsxs)(l.A,{variant:"bordered",isDisabled:c,children:["Servers: ",j]})}),(0,a.jsx)(H.a,{"aria-label":"Servers",items:d,closeOnSelect:!1,selectionMode:"multiple",selectedKeys:new Set([...null!==(s=v.values.server_id)&&void 0!==s?s:[]]),onSelectionChange:e=>v.setFieldValue("server_id",Array.from(e)),disallowEmptySelection:!0,children:e=>(0,a.jsx)(X.W,{id:e.id.toString(),color:"default",children:e.hostname},e.id)})]}),(0,a.jsxs)(Y.F,{children:[(0,a.jsx)(U.S,{children:(0,a.jsxs)(l.A,{variant:"bordered",children:["Group: ",(null==x?void 0:x.name)||"unset"]})}),(0,a.jsx)(H.a,{"aria-label":"Flags",items:null!==(i=null==g?void 0:g.groups)&&void 0!==i?i:[],children:(null==g?void 0:g.groups.map(e=>(0,a.jsxs)(X.W,{id:e.id,color:"default",onClick:()=>v.setValues({flags:e.id}),children:[e.name," ",v.values.flags===e.id&&"(Selected)"]},e.id)))||(0,a.jsx)(a.Fragment,{})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)(Y.F,{children:[(0,a.jsx)(U.S,{children:(0,a.jsxs)(l.A,{variant:"bordered",children:["Web Flags:"," ",x?(0,a.jsxs)(a.Fragment,{children:[x.flags.filter(e=>e.startsWith("@web/")).length||0," ","(Group)"]}):(null==b?void 0:b.split(", ").filter(e=>e.startsWith("@web")).length)||0]})}),(0,a.jsx)(H.a,{"aria-label":"Web Flags",items:ee,closeOnSelect:!1,selectionMode:"multiple",selectedKeys:new Set([...null!==(r=v.values.flags)&&void 0!==r?r:[]]),onSelectionChange:e=>v.setFieldValue("flags",Array.from(e).filter(e=>es.includes(e))),disallowEmptySelection:!0,children:ee.filter(e=>e.id.startsWith("@web/")).map(e=>(0,a.jsxs)(X.W,{id:e.id,color:"default",children:[e.id," - ",e.description]},e.id))})]}),(0,a.jsxs)(Y.F,{children:[(0,a.jsx)(U.S,{children:(0,a.jsxs)(l.A,{variant:"bordered",children:["Admin Flags:"," ",x?(0,a.jsxs)(a.Fragment,{children:[x.flags.filter(e=>e.startsWith("@css/")).length||0," ","(Group)"]}):(null==b?void 0:b.split(", ").filter(e=>e.startsWith("@css")).length)||0]})}),(0,a.jsx)(H.a,{"aria-label":"Admin Flags",items:ee,closeOnSelect:!1,selectionMode:"multiple",selectedKeys:new Set([...null!==(t=v.values.flags)&&void 0!==t?t:[]]),onSelectionChange:e=>v.setFieldValue("flags",Array.from(e).filter(e=>es.includes(e))),disallowEmptySelection:!0,children:ee.filter(e=>e.id.startsWith("@css/")).map(e=>(0,a.jsxs)(X.W,{id:e.id,color:"default",children:[e.id," - ",e.description]},e.id))})]})]}),(0,a.jsx)("span",{className:"text-xs",children:"You can choose either pre defined group, or flags."}),(0,a.jsx)(Q.Y,{value:v.values.immunity,onChange:e=>Number(e.target.value)<Number(null==o?void 0:o.immunity)&&Number(e.target.value)>=0&&v.setFieldValue("immunity",e.target.value),errorMessage:v.errors.immunity,label:"Immunity",placeholder:"Example, 99, max of ".concat(Number(null==o?void 0:o.immunity)-1),description:"Max of ".concat(Number(null==o?void 0:o.immunity)-1," (Your immunity - 1)"),type:"number",variant:"bordered",disabled:h})]}),(0,a.jsxs)(K.R,{children:[(0,a.jsx)(l.A,{color:"danger",variant:"flat",onPress:e,disabled:h,children:"Cancel"}),(0,a.jsx)(l.A,{color:"primary",type:"submit",isLoading:h,children:n?"Edit admin":"Create admin"})]})]})}})})};let en=(0,M.Ue)(e=>({open:!1,setOpen:s=>e({open:s,edit:null}),edit:null,setEdit:s=>e({edit:s,open:!0}),delete:null,setDelete:s=>e({delete:s})}));var et=()=>{let{admin:e}=(0,E.ZP)(),{data:s,isLoading:i}=(0,P.ZP)("/api/admin/groups",W.Z),r=en(e=>e.setEdit),n=en(e=>e.delete),t=en(e=>e.setDelete),d=async()=>{if(n){try{await (0,I.Z)("/api/admin/groups/".concat(n.id.replace("#","")),{method:"DELETE"}),_.Am.success("Succesfully deleted group!"),await (0,P.JG)("/api/admin/groups"),await (0,P.JG)("/api/admin/admins")}catch(s){var e;_.Am.error(null!==(e=s.response.data)&&void 0!==e?e:"Failed to delete group!")}t(null)}},o=i||!s?"loading":"idle",c=(s,i)=>{switch(i){case"id":return(0,a.jsx)(k.z,{variant:"flat",size:"sm",children:s.id});case"name":return(0,a.jsx)("div",{children:s.name});case"flags":let n=s.flags,d=n.filter(e=>e.startsWith("@web")),o=n.filter(e=>e.startsWith("@css"));return"string"!=typeof s.flags?s.flags?s.flags.length>2?(0,a.jsxs)("div",{className:"flex flex-row gap-2",children:[d.length?(0,a.jsx)(N.e,{content:d.join("\n"),closeDelay:50,color:"primary",className:"whitespace-pre-wrap",children:(0,a.jsxs)(k.z,{variant:"flat",size:"sm",color:"primary",children:[d.length," Web Flags"]})}):(0,a.jsx)(a.Fragment,{}),o.length?(0,a.jsx)(N.e,{content:o.join("\n"),closeDelay:50,color:"secondary",className:"whitespace-pre-wrap",children:(0,a.jsxs)(k.z,{variant:"flat",size:"sm",color:"secondary",children:[o.length," Admin Flags"]})}):(0,a.jsx)(a.Fragment,{})]}):(0,a.jsx)(k.z,{variant:"flat",size:"sm",children:s.flags.join(", ")}):"":s.flags;case"immunity":return(0,a.jsx)(k.z,{variant:"flat",size:"sm",children:s.immunity});case"created":return(0,a.jsxs)(a.Fragment,{children:[(0,z.Q)(new Date(s.created||""))," ago"]});case"actions":let c=Number(e.immunity)<=Number(s.immunity);return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(l.A,{size:"sm",variant:"flat",color:"primary",onClick:()=>r(s),isDisabled:c,children:[(0,a.jsx)(S.Z,{size:16}),"Edit Admin Group"]}),(0,a.jsxs)(l.A,{size:"sm",variant:"flat",color:"danger",onClick:()=>t(s),isDisabled:c,children:[(0,a.jsx)(F.Z,{size:16}),"Delete Admin Group"]})]});default:return(0,a.jsx)(a.Fragment,{children:"Error!"})}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(x.b,{children:[(0,a.jsxs)(b.J,{children:[(0,a.jsx)(j.j,{children:"ID"},"id"),(0,a.jsx)(j.j,{children:"Name"},"name"),(0,a.jsx)(j.j,{children:"Flags"},"flags"),(0,a.jsx)(j.j,{children:"Immunity"},"immunity"),(0,a.jsx)(j.j,{children:"Created"},"created"),(0,a.jsx)(j.j,{children:"Actions"},"actions")]}),(0,a.jsx)(y.y,{loadingContent:(0,a.jsx)(C.c,{}),loadingState:o,isLoading:"loading"===o,items:null!=s?s:[],children:e=>(0,a.jsx)(w.g,{children:s=>(0,a.jsx)(A.X,{children:c(e,s)})})})]}),(0,a.jsx)(D.Z,{open:!!n,onAction:d,onCancel:()=>t(null),title:"Delete group",text:(0,a.jsxs)("p",{children:["Are you sure you want to delete: ",(0,a.jsx)("b",{children:null==n?void 0:n.name})," group?"]})})]})};let el=q.z.object({id:q.z.string().min(3).refine(e=>e.startsWith("#"),{message:"The id must start with #"}),name:q.z.string().min(3),flags:q.z.array(ei),immunity:q.z.string().min(0).max(100)});var ed=()=>{let e=en(e=>e.open),s=en(e=>e.edit),i=en(e=>e.setOpen),{admin:r}=(0,E.ZP)(),[n,t]=(0,u.useState)(!1),d=async()=>{if(!n){t(!0);try{await (0,I.Z)(s?"/api/admin/groups/".concat(s.id.replace("#","")):"/api/admin/groups",{method:s?"PUT":"POST",data:o.values}),await (0,P.JG)("/api/admin/groups"),await (0,P.JG)("/api/admin/admins"),_.Am.success(s?"Succesfully edited group!":"Succesfully created group!"),i(!1)}catch(e){console.error(e),_.Am.error("Failed to ".concat(s?"edit":"create"," group!"))}t(!1)}},o=(0,V.c)({initialValues:{id:s?s.id:"#",name:s?s.name:"",flags:s?s.flags:["@css/generic"],immunity:s?s.immunity.toString():"0"},validate:(0,J.F)(el)});return(0,u.useEffect)(()=>{o.setValues({id:s?s.id:"#",name:s?s.name:"",flags:s?s.flags:["@css/generic"],immunity:s?s.immunity.toString():"0"})},[s]),(0,u.useEffect)(()=>{o.values.name&&o.setValues({id:"#".concat(o.values.name.toLowerCase().replace(/\s/g,"-"))})},[o.values.name]),(0,a.jsx)(B.R,{isOpen:e,onOpenChange:n?void 0:i,children:(0,a.jsx)(L.A,{children:e=>(0,a.jsxs)("form",{onSubmit:o.onSubmit(d),children:[(0,a.jsx)(R.k,{className:"flex flex-col gap-1",children:s?"Edit group":"Create new group"}),(0,a.jsxs)(T.I,{children:[(0,a.jsx)(Q.Y,{...o.getInputProps("name"),errorMessage:o.errors.name,label:"Group Name",placeholder:"Example, Admins",variant:"bordered",disabled:n,autoFocus:!0}),(0,a.jsx)(Q.Y,{...o.getInputProps("id"),errorMessage:o.errors.id,label:"Group ID",placeholder:"Example, #admins",type:"text",variant:"bordered",disabled:n}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)(Y.F,{children:[(0,a.jsx)(U.S,{children:(0,a.jsxs)(l.A,{variant:"bordered",children:["Web Flags: ",o.values.flags.filter(e=>e.startsWith("@web")).length]})}),(0,a.jsx)(H.a,{"aria-label":"Web Flags",items:ee.filter(e=>e.id.startsWith("@web")),closeOnSelect:!1,selectionMode:"multiple",selectedKeys:new Set([...o.values.flags]),onSelectionChange:e=>o.setFieldValue("flags",Array.from(e)),disallowEmptySelection:!0,children:e=>(0,a.jsxs)(X.W,{id:e.id,color:"default",children:[e.id," - ",e.description]},e.id)})]}),(0,a.jsxs)(Y.F,{children:[(0,a.jsx)(U.S,{children:(0,a.jsxs)(l.A,{variant:"bordered",children:["Admin Flags: ",o.values.flags.filter(e=>e.startsWith("@css")).length]})}),(0,a.jsx)(H.a,{"aria-label":"Admin Flags",items:ee.filter(e=>e.id.startsWith("@css")),closeOnSelect:!1,selectionMode:"multiple",selectedKeys:new Set([...o.values.flags]),onSelectionChange:e=>o.setFieldValue("flags",Array.from(e)),disallowEmptySelection:!0,children:e=>(0,a.jsxs)(X.W,{id:e.id,color:"default",children:[e.id," - ",e.description]},e.id)})]})]}),(0,a.jsx)(Q.Y,{value:o.values.immunity,onChange:e=>Number(e.target.value)<Number(null==r?void 0:r.immunity)&&Number(e.target.value)>=0&&o.setFieldValue("immunity",e.target.value),errorMessage:o.errors.immunity,label:"Immunity",placeholder:"Example, 99, max of ".concat(Number(null==r?void 0:r.immunity)-1),description:"Max of ".concat(Number(null==r?void 0:r.immunity)-1," (Your immunity - 1)"),type:"number",variant:"bordered",disabled:n})]}),(0,a.jsxs)(K.R,{children:[(0,a.jsx)(l.A,{color:"danger",variant:"flat",onPress:e,disabled:n,children:"Cancel"}),(0,a.jsx)(l.A,{color:"primary",type:"submit",isLoading:n,children:s?"Edit admin group":"Create admin group"})]})]})})})},eo=i(7512),ec=()=>{let e=Z(e=>e.setOpen),s=en(e=>e.setOpen),i=(0,f.usePathname)(),d=v.ADMIN_TABS.find(e=>e.path===i);return(0,a.jsx)(eo.default,{flags:(null==d?void 0:d.permissions)||[],children:(0,a.jsxs)(p.n,{"aria-label":"Options",children:[(0,a.jsx)(g.r,{title:"Manage Admins",children:(0,a.jsxs)(r.w,{children:[(0,a.jsxs)(n.u,{className:"text-2xl font-medium flex flex-row justify-between",children:["Manage Admins",(0,a.jsxs)(l.A,{size:"sm",variant:"flat",color:"primary",onClick:()=>e(!0),children:[(0,a.jsx)(h.Z,{}),"Add new Admin"]})]}),(0,a.jsx)(t.G,{children:(0,a.jsx)(O,{})}),(0,a.jsx)(er,{})]})},"admins"),(0,a.jsx)(g.r,{title:"Manage Groups",children:(0,a.jsxs)(r.w,{children:[(0,a.jsxs)(n.u,{className:"text-2xl font-medium flex flex-row justify-between",children:["Manage Admin Groups",(0,a.jsxs)(l.A,{size:"sm",variant:"flat",color:"primary",onClick:()=>s(!0),children:[(0,a.jsx)(h.Z,{}),"Add new group"]})]}),(0,a.jsxs)(t.G,{children:[(0,a.jsxs)("p",{className:"text-sm mb-6",children:["Admin groups are used to make pre-defined permissions for admins, you can assign an admin to a group and whenever you change the group permissions, the admin will automatically get the new permissions.",(0,a.jsx)("br",{}),"Note that you can also assign a group to an admin by using the command"," ",(0,a.jsx)(m,{size:"sm",children:"css_addadmin [steam64] [name] [groupId] [immunity - 0]"})]}),(0,a.jsx)(et,{})]}),(0,a.jsx)(ed,{})]})},"groups")]})})}},772:function(e,s,i){"use strict";var a=i(1840),r=i(776),n=i(7040),t=i(964),l=i(7743),d=i(8826),o=i(9954);s.Z=e=>{let{open:s,title:i,text:c,onAction:u,onCancel:m}=e;return(0,a.jsx)(n.R,{isOpen:s,onOpenChange:m,children:(0,a.jsx)(t.A,{children:e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.k,{className:"flex flex-col gap-1",children:i}),(0,a.jsx)(d.I,{children:c}),(0,a.jsxs)(o.R,{children:[(0,a.jsx)(r.A,{color:"default",variant:"flat",onPress:e,children:"Cancel"}),(0,a.jsx)(r.A,{color:"primary",type:"submit",onClick:u,children:i})]})]})})})}},4620:function(e,s,i){"use strict";i.d(s,{Z:function(){return a}});var a=(0,i(2695).Z)("edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]])},175:function(e,s,i){"use strict";var a=i(1916);s.Z=e=>a.Z.get(e).then(e=>e.data)},646:function(e,s,i){"use strict";i.d(s,{hY:function(){return l},jc:function(){return d}});var a=i(2573),r=i(917),n=i(175),t=i(1916);let l=async()=>{await (0,t.Z)("/api/auth/logout"),await (0,r.JG)("/api/auth"),a.Am.success("Logged out successfully")},d=()=>{let e=window.innerWidth/2-300,s=window.innerHeight/2-400,i=window.open("/api/auth/login/","","toolbar=no, location=no, directories=no, status=no, menubar=no, \n		  scrollbars=no, resizable=yes, copyhistory=no, width=".concat(600,", \n		  height=").concat(800,", top=").concat(s,", left=").concat(e)),n=setInterval(async()=>{i&&i.closed&&(await (0,r.JG)("/api/auth"),a.Am.success("Logged in successfully!"),clearInterval(n))},1e3)};s.ZP=()=>{let{data:e,isLoading:s,error:i}=(0,r.ZP)("/api/auth",n.Z);return e&&e.admin&&e.admin.group&&(e.admin.flags=e.admin.group.flags,e.admin.immunity=e.admin.group.immunity),{user:i||!e?null:e.user,admin:i||!e?null:e.admin,isLoading:s}}},1070:function(e,s,i){"use strict";i.d(s,{G:function(){return o}});var a=i(9226),r=i(6840),n=i(9763),t=i(7614),l=i(1840),d=(0,r.Gp)((e,s)=>{var i;let{as:r,className:d,children:o,...c}=e,u=(0,n.gy)(s),{slots:m,classNames:h}=(0,a.R)(),p=(0,t.W)(null==h?void 0:h.body,d);return(0,l.jsx)(r||"div",{ref:u,className:null==(i=m.body)?void 0:i.call(m,{class:p}),...c,children:o})});d.displayName="NextUI.CardBody";var o=d},5458:function(e,s,i){"use strict";i.d(s,{w:function(){return y}});var a=i(9226),r=i(2419),n=i(9071),t=(0,r.tv)({slots:{base:["flex","flex-col","relative","overflow-hidden","height-auto","outline-none","text-foreground","box-border","bg-content1",...n.Dh],header:["flex","p-3","z-10","w-full","justify-start","items-center","shrink-0","overflow-inherit","color-inherit","subpixel-antialiased"],body:["relative","flex","flex-1","w-full","p-3","flex-auto","flex-col","place-content-inherit","align-items-inherit","h-auto","break-words","text-left","overflow-y-auto","subpixel-antialiased"],footer:["p-3","h-auto","flex","w-full","items-center","overflow-hidden","color-inherit","subpixel-antialiased"]},variants:{shadow:{none:{base:"shadow-none"},sm:{base:"shadow-small"},md:{base:"shadow-medium"},lg:{base:"shadow-large"}},radius:{none:{base:"rounded-none",header:"rounded-none",footer:"rounded-none"},sm:{base:"rounded-small",header:"rounded-t-small",footer:"rounded-b-small"},md:{base:"rounded-medium",header:"rounded-t-medium",footer:"rounded-b-medium"},lg:{base:"rounded-large",header:"rounded-t-large",footer:"rounded-b-large"}},fullWidth:{true:{base:"w-full"}},isHoverable:{true:{base:"data-[hover=true]:bg-content2 dark:data-[hover=true]:bg-content2"}},isPressable:{true:{base:"cursor-pointer"}},isBlurred:{true:{base:["bg-background/80","dark:bg-background/20","backdrop-blur-md","backdrop-saturate-150"]}},isFooterBlurred:{true:{footer:["bg-background/10","backdrop-blur","backdrop-saturate-150"]}},isDisabled:{true:{base:"opacity-disabled cursor-not-allowed"}},disableAnimation:{true:"",false:{base:"transition-transform-background motion-reduce:transition-none"}}},compoundVariants:[{isPressable:!0,disableAnimation:!1,class:"data-[pressed=true]:scale-[0.97] tap-highlight-transparent"}],defaultVariants:{radius:"lg",shadow:"md",fullWidth:!1,isHoverable:!1,isPressable:!1,isDisabled:!1,disableAnimation:!1,isFooterBlurred:!1}}),l=i(4740),d=i(1808),o=i(8084),c=i(4042),u=i(3309),m=i(6840),h=i(7614),p=i(7232),g=i(6),f=i(9763),v=i(3122),x=i(1033),b=i(1840),j=(0,m.Gp)((e,s)=>{let{children:i,context:r,Component:n,isPressable:j,disableAnimation:y,disableRipple:w,getCardProps:A,getRippleProps:S}=function(e){let[s,i]=(0,m.oe)(e,t.variantKeys),{ref:a,as:r,children:n,disableRipple:x=!1,onClick:b,onPress:j,autoFocus:y,className:w,classNames:A,allowTextSelectionOnPress:S=!0,...F}=s,z=(0,f.gy)(a),N=r||(e.isPressable?"button":"div"),C="string"==typeof N,_=(0,h.W)(null==A?void 0:A.base,w),{onClick:k,onClear:P,ripples:W}=(0,v.i)(),D=s=>{e.disableAnimation||x||!z.current||k(s)},{buttonProps:E,isPressed:M}=(0,u.j)({onPress:j,elementType:r,isDisabled:!e.isPressable,onClick:(0,d.tS)(b,D),allowTextSelectionOnPress:S,...F},z),{hoverProps:Z,isHovered:G}=(0,c.XI)({isDisabled:!e.isHoverable,...F}),{isFocusVisible:I,isFocused:O,focusProps:V}=(0,o.Fx)({autoFocus:y}),J=(0,l.useMemo)(()=>t({...i}),[...Object.values(i)]),B=(0,l.useMemo)(()=>({isDisabled:e.isDisabled,isFooterBlurred:e.isFooterBlurred,disableAnimation:e.disableAnimation,fullWidth:e.fullWidth,slots:J,classNames:A}),[J,A,e.isDisabled,e.isFooterBlurred,e.disableAnimation,e.fullWidth]),L=(0,l.useCallback)(function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ref:z,className:J.base({class:_}),tabIndex:e.isPressable?0:-1,"data-hover":(0,p.PB)(G),"data-pressed":(0,p.PB)(M),"data-focus":(0,p.PB)(O),"data-focus-visible":(0,p.PB)(I),"data-disabled":(0,p.PB)(e.isDisabled),...(0,d.dG)(e.isPressable?{...E,...V,role:"button"}:{},e.isHoverable?Z:{},(0,g.z)(F,{enabled:C}),(0,g.z)(s))}},[z,J,_,C,e.isPressable,e.isHoverable,e.isDisabled,G,M,I,E,V,Z,F]),R=(0,l.useCallback)(()=>({ripples:W,onClear:P}),[W,P]);return{context:B,domRef:z,Component:N,classNames:A,children:n,isHovered:G,isPressed:M,isPressable:e.isPressable,isHoverable:e.isHoverable,disableAnimation:e.disableAnimation,disableRipple:x,handleClick:D,isFocusVisible:I,getCardProps:L,getRippleProps:R}}({...e,ref:s});return(0,b.jsxs)(n,{...A(),children:[(0,b.jsx)(a.k,{value:r,children:i}),j&&!y&&!w&&(0,b.jsx)(x.L,{...S()})]})});j.displayName="NextUI.Card";var y=j},9226:function(e,s,i){"use strict";i.d(s,{R:function(){return r},k:function(){return a}});var[a,r]=(0,i(6596).k)({name:"CardContext",strict:!0,errorMessage:"useCardContext: `context` is undefined. Seems you forgot to wrap component within <Card />"})}},function(e){e.O(0,[1356,298,3277,4594,2150,5792,2298,839,3910,9741,4672,8659,8176,9869,236,3290,7942,1784,1744],function(){return e(e.s=4154)}),_N_E=e.O()}]);
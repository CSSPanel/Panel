(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7413],{37419:function(e,t,r){Promise.resolve().then(r.bind(r,96834))},96834:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return D}});var a=r(57437),n=r(61408),s=r(73173),l=r(68710),i=r(2265),o=r(55294),c=r(49365),d=r(99008),u=r(65349),p=r(2321),f=r(61639),h=r(31229);let m=h.z.object({STEAM_API_KEY:h.z.string().min(1),SESSION_SECRET:h.z.string().min(1).optional(),DOMAIN:h.z.string().min(1),DB_HOST:h.z.string().min(1),DB_USER:h.z.string().min(1),DB_PASSWORD:h.z.string().min(1),DB_DATABASE:h.z.string().min(1),DB_PORT:h.z.string().min(1),MASTER_ADMIN:h.z.string().min(1)}),g=h.z.object({DB_HOST:h.z.string().min(1),DB_USER:h.z.string().min(1),DB_PASSWORD:h.z.string().min(1),DB_DATABASE:h.z.string().min(1),DB_PORT:h.z.string().min(1)});var b=r(69064),S=r(64906),x=r(27648),D=()=>{let[e,t]=(0,i.useState)(0),[r,h]=(0,i.useState)(!1),D=(0,n.c)({initialValues:{STEAM_API_KEY:"",DOMAIN:"",DB_HOST:"",DB_USER:"",DB_PASSWORD:"",DB_DATABASE:"",DB_PORT:"3306",MASTER_ADMIN:""},validate:(0,s.F)(m)}),v=async()=>{h(!0);try{await S.Z.post("/api/admin/db",D.values),b.ZP.success("Database connection is valid!"),t(2)}catch(e){console.error(e),b.ZP.error("Failed to connect to the database!")}h(!1)},A=async()=>{if(!r){h(!0);try{await S.Z.post("/api/admin/setup",D.values),b.ZP.success("Succesfully setup the panel!"),t(3)}catch(e){console.error(e),b.ZP.error("Failed to setup the panel!")}h(!1)}},_=(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("p",{children:["Please fill in the following settings to setup the panel.",(0,a.jsx)("br",{}),"Make sure to have your database ready and a Steam API key. ",(0,a.jsx)("br",{}),"The following setting will be saved under the ",(0,a.jsx)("code",{children:".env"})," file in your website folder.",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("b",{children:"Important note: "}),"If you are using Easypanel or Vercel, or not self hosting your website, you will need to"," ",(0,a.jsxs)(x.default,{href:"https://csspanel.dev/docs/quickstart",target:"_blank",className:"underline",children:["manually add the settings to your ",(0,a.jsx)("code",{children:".env"})," file."]})]})}),y=async()=>{switch(e){case 0:t(1);break;case 1:try{g.parse(D.values),await v()}catch(e){console.error(e),b.ZP.error("Invalid database settings!")}break;case 2:await A()}};switch(e){case 1:_=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Y,{label:"Database URL",placeholder:"1.1.1.1",errorMessage:D.errors.DB_HOST,isInvalid:!!D.errors.DB_HOST,type:"text",variant:"bordered",disabled:r,...D.getInputProps("DB_HOST")}),(0,a.jsx)(l.Y,{label:"Database User",placeholder:"root",errorMessage:D.errors.DB_USER,isInvalid:!!D.errors.DB_USER,type:"text",variant:"bordered",disabled:r,autoComplete:"off",...D.getInputProps("DB_USER")}),(0,a.jsx)(l.Y,{label:"Database Password",placeholder:"111111",errorMessage:D.errors.DB_PASSWORD,isInvalid:!!D.errors.DB_PASSWORD,type:"password",variant:"bordered",autoComplete:"off",disabled:r,...D.getInputProps("DB_PASSWORD")}),(0,a.jsx)(l.Y,{label:"Database Name",placeholder:"DB_NAME",errorMessage:D.errors.DB_DATABASE,isInvalid:!!D.errors.DB_DATABASE,type:"text",variant:"bordered",disabled:r,...D.getInputProps("DB_DATABASE")}),(0,a.jsx)(l.Y,{label:"Database Port",placeholder:"DB_PORT",errorMessage:D.errors.DB_PORT,isInvalid:!!D.errors.DB_PORT,type:"number",variant:"bordered",disabled:r,...D.getInputProps("DB_PORT")})]});break;case 2:_=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Y,{label:"Website Domain",description:"The url of your website, e.g. https://example.com",placeholder:"https://example.com",errorMessage:D.errors.DOMAIN,isInvalid:!!D.errors.DOMAIN,type:"text",variant:"bordered",disabled:r,...D.getInputProps("DOMAIN")}),(0,a.jsx)(l.Y,{label:"Steam API Key",description:(0,a.jsxs)(a.Fragment,{children:["Get your Steam API key from"," ",(0,a.jsx)(x.default,{href:"https://steamcommunity.com/dev/apikey",target:"_blank",children:"https://steamcommunity.com/dev/apikey"})]}),placeholder:"eg, 74B762FA601616732",errorMessage:D.errors.STEAM_API_KEY,isInvalid:!!D.errors.STEAM_API_KEY,type:"text",variant:"bordered",disabled:r,...D.getInputProps("STEAM_API_KEY")}),(0,a.jsx)(l.Y,{label:"Master Admin",description:"Steam 64",placeholder:"eg, 76561198000000000",errorMessage:D.errors.MASTER_ADMIN,isInvalid:!!D.errors.MASTER_ADMIN,type:"text",variant:"bordered",disabled:r,...D.getInputProps("MASTER_ADMIN")})]});break;case 3:_=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold",children:"Setup complete!"}),(0,a.jsx)("p",{children:"Please restart the panel for the changes to take effect."})]})}return(0,a.jsxs)(o.w,{className:"container mx-auto my-auto",children:[(0,a.jsx)(c.u,{className:"flex flex-col items-start gap-2",children:(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Setup CSS-Panel"})}),(0,a.jsx)(d.G,{className:"flex flex-col gap-4 p-6",children:_}),(0,a.jsxs)(u.i,{className:"border-t relative flex items-center py-4 pt-6",children:[(0,a.jsx)(p.W,{value:e/3*100,className:"absolute top-0 w-full right-0 left-0 h-1.5",classNames:{track:"rounded-none"},color:"primary",size:"sm","aria-label":"Progress"}),(0,a.jsx)(f.A,{onClick:y,size:"lg",isLoading:r,color:"primary",className:"min-w-[200px] mx-auto",isDisabled:3===e,children:"Continue"})]})]})}},49365:function(e,t,r){"use strict";r.d(t,{u:function(){return c}});var a=r(27520),n=r(8774),s=r(41193),l=r(59702),i=r(57437),o=(0,n.Gp)((e,t)=>{var r;let{as:n,className:o,children:c,...d}=e,u=(0,s.gy)(t),{slots:p,classNames:f}=(0,a.R)(),h=(0,l.W)(null==f?void 0:f.header,o);return(0,i.jsx)(n||"div",{ref:u,className:null==(r=p.header)?void 0:r.call(p,{class:h}),...d,children:c})});o.displayName="NextUI.CardHeader";var c=o},65349:function(e,t,r){"use strict";r.d(t,{i:function(){return c}});var a=r(27520),n=r(8774),s=r(41193),l=r(59702),i=r(57437),o=(0,n.Gp)((e,t)=>{var r;let{as:n,className:o,children:c,...d}=e,u=(0,s.gy)(t),{slots:p,classNames:f}=(0,a.R)(),h=(0,l.W)(null==f?void 0:f.footer,o);return(0,i.jsx)(n||"div",{ref:u,className:null==(r=p.footer)?void 0:r.call(p,{class:h}),...d,children:c})});o.displayName="NextUI.CardFooter";var c=o},25311:function(e,t,r){"use strict";r.d(t,{b:function(){return b},j:function(){return S}});let a=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),n=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function s(e){if(Intl.Locale){let t=new Intl.Locale(e).maximize(),r="function"==typeof t.getTextInfo?t.getTextInfo():t.textInfo;if(r)return"rtl"===r.direction;if(t.script)return a.has(t.script)}let t=e.split("-")[0];return n.has(t)}var l=r(2265),i=r(87365);let o=Symbol.for("react-aria.i18n.locale");function c(){let e="undefined"!=typeof window&&window[o]||"undefined"!=typeof navigator&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([e])}catch{e="en-US"}return{locale:e,direction:s(e)?"rtl":"ltr"}}let d=c(),u=new Set;function p(){for(let e of(d=c(),u))e(d)}function f(){let e=(0,i.Av)(),[t,r]=(0,l.useState)(d);return((0,l.useEffect)(()=>(0===u.size&&window.addEventListener("languagechange",p),u.add(r),()=>{u.delete(r),0===u.size&&window.removeEventListener("languagechange",p)}),[]),e)?{locale:"en-US",direction:"ltr"}:t}let h=l.createContext(null);function m(e){let{locale:t,children:r}=e,a=l.useMemo(()=>({locale:t,direction:s(t)?"rtl":"ltr"}),[t]);return l.createElement(h.Provider,{value:a},r)}function g(e){let{children:t}=e,r=f();return l.createElement(h.Provider,{value:r},t)}function b(e){let{locale:t,children:r}=e;return t?l.createElement(m,{locale:t,children:r}):l.createElement(g,{children:r})}function S(){let e=f();return(0,l.useContext)(h)||e}},1433:function(e,t,r){"use strict";function a(e,t=-1/0,r=1/0){return Math.min(Math.max(e,t),r)}function n(e,t){let r=e,a=0,n=t.toString(),s=n.toLowerCase().indexOf("e-");if(s>0)a=Math.abs(Math.floor(Math.log10(Math.abs(t))))+s;else{let e=n.indexOf(".");e>=0&&(a=n.length-e)}if(a>0){let e=Math.pow(10,a);r=Math.round(r*e)/e}return r}function s(e,t,r,a){t=Number(t),r=Number(r);let s=(e-(isNaN(t)?0:t))%a,l=n(2*Math.abs(s)>=a?e+Math.sign(s)*(a-Math.abs(s)):e-s,a);return isNaN(t)?!isNaN(r)&&l>r&&(l=Math.floor(n(r/a,a))*a):l<t?l=t:!isNaN(r)&&l>r&&(l=t+Math.floor(n((r-t)/a,a))*a),l=n(l,a)}r.d(t,{N4:function(){return s},uZ:function(){return a}})}},function(e){e.O(0,[3416,384,9064,1639,3022,7648,8811,1229,1408,8735,2971,2117,1744],function(){return e(e.s=37419)}),_N_E=e.O()}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[712],{712:function(e,t,r){r.d(t,{v1:function(){return M}});var l,n,s,o="object"==typeof localStorage&&((null===(n=localStorage.getItem("debug"))||void 0===n?void 0:n.includes("next-usequerystate"))||(null===(s=localStorage.getItem("debug"))||void 0===s?void 0:s.includes("nuqs")))||!1;function i(e){for(var t=arguments.length,r=Array(t>1?t-1:0),l=1;l<t;l++)r[l-1]=arguments[l];if(!o)return;let n=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),l=1;l<t;l++)r[l-1]=arguments[l];return e.replace(/%[sfdO]/g,e=>{let t=r.shift();return"%O"===e&&t?JSON.stringify(t).replace(/"([^"]+)":/g,"$1:"):String(t)})}(e,...r);performance.mark(n),console.log(e,...r)}function u(e,t,r){try{return e(t)}catch(e){return!function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),l=1;l<t;l++)r[l-1]=arguments[l];o&&console.warn(e,...r)}("[nuqs] Error while parsing value `%s`: %O"+(r?" (for key `%s`)":""),t,e,r),null}}function a(e){function t(t){if(void 0===t)return null;let r="";if(Array.isArray(t)){if(void 0===t[0])return null;r=t[0]}return"string"==typeof t&&(r=t),u(e.parse,r)}return{...e,parseServerSide:t,withDefault(e){return{...this,defaultValue:e,parseServerSide(r){var l;return null!==(l=t(r))&&void 0!==l?l:e}}},withOptions(e){return{...this,...e}}}}a({parse:e=>e,serialize:e=>"".concat(e)}),a({parse:e=>{let t=parseInt(e);return Number.isNaN(t)?null:t},serialize:e=>Math.round(e).toFixed()}),a({parse:e=>{let t=parseInt(e,16);return Number.isNaN(t)?null:t},serialize:e=>{let t=Math.round(e).toString(16);return t.padStart(t.length+t.length%2,"0")}}),a({parse:e=>{let t=parseFloat(e);return Number.isNaN(t)?null:t},serialize:e=>e.toString()}),a({parse:e=>"true"===e,serialize:e=>e?"true":"false"}),a({parse:e=>{let t=parseInt(e);return Number.isNaN(t)?null:new Date(t)},serialize:e=>e.valueOf().toString()}),a({parse:e=>{let t=new Date(e);return Number.isNaN(t.valueOf())?null:t},serialize:e=>e.toISOString()});var c={409:"Multiple versions of the library are loaded. This may lead to unexpected behavior. Currently using %s, but %s was about to load on top.",429:"URL update rate-limited by the browser. Consider increasing `throttleMs` for keys %s. %O",500:"Empty search params cache. Search params can't be accessed in Layouts.",501:"Search params cache already populated. Have you called `parse` twice?"};function h(e){return"[nuqs] ".concat(c[e],"\n  See https://err.47ng.com/NUQS-").concat(e)}var f=r(1318),p=r(4740),d=function(){if(!window.GestureEvent)return 50;try{var e;let t=null===(e=navigator.userAgent)||void 0===e?void 0:e.match(/version\/([\d\.]+) safari/i);return parseFloat(t[1])>=17?120:320}catch(e){return 320}}(),v=new Map,g={history:"replace",scroll:!1,shallow:!0,throttleMs:d},y=new Set,m=0,w=null;function S(e){var t;return null!==(t=v.get(e))&&void 0!==t?t:null}function q(e,t){var r;return(null!==(r=e.split("#")[0])&&void 0!==r?r:"")+function(e){if(0===e.size)return"";let t=[];for(let[r,l]of e.entries())t.push("".concat(r,"=").concat(l.replace(/%/g,"%25").replace(/\+/g,"%2B").replace(/ /g,"+").replace(/#/g,"%23").replace(/&/g,"%26").replace(/"/g,"%22").replace(/'/g,"%27").replace(/`/g,"%60").replace(/</g,"%3C").replace(/>/g,"%3E")));return"?"+t.join("&")}(t)+location.hash}var b=Symbol("__nuqs__SYNC__"),_="__nuqs__NO_SYNC__",N=Symbol("__nuqs__NOTIFY__"),O={all:l=l||new Map,on:function(e,t){var r=l.get(e);r?r.push(t):l.set(e,[t])},off:function(e,t){var r=l.get(e);r&&(t?r.splice(r.indexOf(t)>>>0,1):l.set(e,[]))},emit:function(e,t){var r=l.get(e);r&&r.slice().map(function(e){e(t)}),(r=l.get("*"))&&r.slice().map(function(r){r(e,t)})}};function M(e){var t,r;let{history:l="replace",shallow:n=!0,scroll:s=!1,throttleMs:o=d,parse:a=e=>e,serialize:c=String,defaultValue:N,startTransition:M}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{history:"replace",scroll:!1,shallow:!0,throttleMs:d,parse:e=>e,serialize:String,defaultValue:void 0},T=(0,f.useRouter)(),P=(0,f.useSearchParams)(),[x,E]=p.useState(()=>{var t,r;let l=S(e),n="object"!=typeof location?null!==(t=null==P?void 0:P.get(e))&&void 0!==t?t:null:null!==(r=new URLSearchParams(location.search).get(e))&&void 0!==r?r:null,s=null!=l?l:n;return null===s?null:u(a,s,e)}),I=p.useRef(x);i("[nuqs `%s`] render - state: %O, iSP: %s",e,x,null!==(t=null==P?void 0:P.get(e))&&void 0!==t?t:null),p.useEffect(()=>{var t,r;if((null===(t=window.next)||void 0===t?void 0:t.version)!=="14.0.3")return;let l=null!==(r=P.get(e))&&void 0!==r?r:null,n=null===l?null:u(a,l,e);i("[nuqs `%s`] syncFromUseSearchParams %O",e,n),I.current=n,E(n)},[null==P?void 0:P.get(e),e]),p.useInsertionEffect(()=>{function t(t){i("[nuqs `%s`] updateInternalState %O",e,t),I.current=t,E(t)}function r(r){var l;let n=null!==(l=r.get(e))&&void 0!==l?l:null,s=null===n?null:u(a,n,e);i("[nuqs `%s`] syncFromURL %O",e,s),t(s)}return i("[nuqs `%s`] subscribing to sync",e),O.on(b,r),O.on(e,t),()=>{i("[nuqs `%s`] unsubscribing from sync",e),O.off(b,r),O.off(e,t)}},[e]);let k=p.useCallback(function(t){var r,u,a,f,p,S,b;let P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},x="function"==typeof t?t(null!==(u=null!==(r=I.current)&&void 0!==r?r:N)&&void 0!==u?u:null):t;return O.emit(e,x),!function(e,t,r,l){var n;let s=null===t?null:r(t);i("[nuqs queue] Enqueueing %s=%s %O",e,s,l),v.set(e,s),"push"===l.history&&(g.history="push"),l.scroll&&(g.scroll=!0),!1===l.shallow&&(g.shallow=!1),l.startTransition&&(y.add(l.startTransition),g.shallow=!1),g.throttleMs=Math.max(null!==(n=l.throttleMs)&&void 0!==n?n:d,Number.isFinite(g.throttleMs)?g.throttleMs:0)}(e,x,c,{history:null!==(a=P.history)&&void 0!==a?a:l,shallow:null!==(f=P.shallow)&&void 0!==f?f:n,scroll:null!==(p=P.scroll)&&void 0!==p?p:s,throttleMs:null!==(S=P.throttleMs)&&void 0!==S?S:o,startTransition:null!==(b=P.startTransition)&&void 0!==b?b:M}),null===w&&(w=new Promise((e,t)=>{if(!Number.isFinite(g.throttleMs)){i("[nuqs queue] Skipping flush due to throttleMs=Infinity"),e(new URLSearchParams(location.search)),setTimeout(()=>{w=null},0);return}function r(){m=performance.now();let[r,l]=function(e){let t=new URLSearchParams(location.search);if(0===v.size)return[t,null];let r=Array.from(v.entries()),l={...g},n=Array.from(y);for(let[e,n]of(v.clear(),y.clear(),g.history="replace",g.scroll=!1,g.shallow=!0,g.throttleMs=d,i("[nuqs queue] Flushing queue %O with options %O",r,l),r))null===n?t.delete(e):t.set(e,n);try{var s,o,u;let r=null===(s=window.next)||void 0===s?void 0:s.router;if("string"==typeof(null==r?void 0:null===(o=r.state)||void 0===o?void 0:o.asPath)){let e=q(null!==(u=r.state.asPath.split("?")[0])&&void 0!==u?u:"",t);i("[nuqs queue (pages)] Updating url: %s",e),("push"===l.history?r.push:r.replace).call(r,e,e,{scroll:l.scroll,shallow:l.shallow})}else{let r=q(location.origin+location.pathname,t);i("[nuqs queue (app)] Updating url: %s",r),("push"===l.history?history.pushState:history.replaceState).call(history,history.state,_,r),l.scroll&&window.scrollTo(0,0),l.shallow||function(e,t){let r=l=>{if(l===e.length)return t();let n=e[l];if(!n)throw Error("Invalid transition function");n(()=>r(l+1))};r(0)}(n,()=>{e.replace(r,{scroll:!1,shallow:!1})})}return[t,null]}catch(e){return console.error(h(429),r.map(e=>{let[t]=e;return t}).join(),e),[t,e]}}(T);null===l?e(r):t(r),w=null}setTimeout(function(){let e=performance.now()-m,t=g.throttleMs,l=Math.max(0,Math.min(t,t-e));i("[nuqs queue] Scheduling flush in %f ms. Throttled at %f ms",l,t),0===l?r():setTimeout(r,l)},0)})),w},[e,l,n,s,o,M]);return[null!==(r=null!=x?x:N)&&void 0!==r?r:null,k]}"object"==typeof history&&function(){let e="1.15.4",t=history.__nuqs_patched;if(t){t!==e&&console.error(h(409),t,e);return}for(let t of(i("[nuqs] Patching history with %s",e),["pushState","replaceState"])){let e=history[t].bind(history);history[t]=function(r,l,n){if(!n)return i("[nuqs] history.%s(null) (%s) %O",t,l,r),e(r,l,n);let s=l===_?"internal":"external",o=new URL(n,location.origin).searchParams;if(i("[nuqs] history.%s(%s) (%s) %O",t,n,s,r),"external"===s){for(let[e,t]of o.entries()){let r=S(e);null!==r&&r!==t&&(i("[nuqs] Overwrite detected for key: %s, Server: %s, queue: %s",e,t,r),o.set(e,r))}setTimeout(()=>{i("[nuqs] External history.%s call: triggering sync with %s",t,o),O.emit(b,o),O.emit(N,{search:o,source:s})},0)}else setTimeout(()=>{O.emit(N,{search:o,source:s})},0);return e(r,l===_?"":l,n)}}Object.defineProperty(history,"__nuqs_patched",{value:e,writable:!1,enumerable:!1,configurable:!1})}()}}]);
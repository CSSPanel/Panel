(()=>{var e={};e.id=7413,e.ids=[7413],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},95346:e=>{"use strict";e.exports=require("timers")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},15673:e=>{"use strict";e.exports=require("node:events")},70612:e=>{"use strict";e.exports=require("node:os")},97742:e=>{"use strict";e.exports=require("node:process")},25997:e=>{"use strict";e.exports=require("node:tty")},68850:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>c,pages:()=>d,routeModule:()=>f,tree:()=>u}),r(29065),r(43281),r(95167),r(35866);var s=r(23191),i=r(88716),n=r(37922),a=r.n(n),o=r(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let u=["",{children:["setup",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,29065)),"/Users/amireliz/Documents/Projects/CSSPanel/Panel/app/setup/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,43281)),"/Users/amireliz/Documents/Projects/CSSPanel/Panel/app/setup/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,95167)),"/Users/amireliz/Documents/Projects/CSSPanel/Panel/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/amireliz/Documents/Projects/CSSPanel/Panel/app/setup/page.tsx"],c="/setup/page",p={require:r,loadChunk:()=>Promise.resolve()},f=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/setup/page",pathname:"/setup",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},80729:(e,t,r)=>{Promise.resolve().then(r.bind(r,58897))},35303:()=>{},58897:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(10326),i=r(83072),n=r(53335),a=r(89507),o=r(17577),l=r(22007),u=r(24663),d=r(12747),c=r(18265),p=r(84982),f=r(6664),m=r(27256);let g=m.z.object({STEAM_API_KEY:m.z.string().min(1),SESSION_SECRET:m.z.string().min(1).optional(),DOMAIN:m.z.string().min(1),DB_HOST:m.z.string().min(1),DB_USER:m.z.string().min(1),DB_PASSWORD:m.z.string().min(1),DB_DATABASE:m.z.string().min(1),DB_PORT:m.z.string().min(1),MASTER_ADMIN:m.z.string().min(1)}),x=m.z.object({DB_HOST:m.z.string().min(1),DB_USER:m.z.string().min(1),DB_PASSWORD:m.z.string().min(1),DB_DATABASE:m.z.string().min(1),DB_PORT:m.z.string().min(1)});var _=r(40381),S=r(24490),b=r(90434);let h=()=>{let[e,t]=(0,o.useState)(0),[r,m]=(0,o.useState)(!1),h=(0,i.c)({initialValues:{STEAM_API_KEY:"",DOMAIN:"",DB_HOST:"",DB_USER:"",DB_PASSWORD:"",DB_DATABASE:"",DB_PORT:"3306",MASTER_ADMIN:""},validate:(0,n.F)(g)}),P=async()=>{m(!0);try{await S.Z.post("/api/admin/db",h.values),_.ZP.success("Database connection is valid!"),t(2)}catch(e){console.error(e),_.ZP.error("Failed to connect to the database!")}m(!1)},y=async()=>{if(!r){m(!0);try{await S.Z.post("/api/admin/setup",h.values),_.ZP.success("Succesfully setup the panel!"),t(3)}catch(e){console.error(e),_.ZP.error("Failed to setup the panel!")}m(!1)}},v=s.jsx(s.Fragment,{children:(0,s.jsxs)("p",{children:["Please fill in the following settings to setup the panel.",s.jsx("br",{}),"Make sure to have your database ready and a Steam API key. ",s.jsx("br",{}),"The following setting will be saved under the ",s.jsx("code",{children:".env"})," file in your website folder.",s.jsx("br",{}),s.jsx("br",{}),s.jsx("b",{children:"Important note: "}),"If you are using Easypanel or Vercel, or not self hosting your website, you will need to"," ",(0,s.jsxs)(b.default,{href:"https://csspanel.dev/docs/quickstart",target:"_blank",className:"underline",children:["manually add the settings to your ",s.jsx("code",{children:".env"})," file."]})]})}),D=async()=>{switch(e){case 0:t(1);break;case 1:try{x.parse(h.values),await P()}catch(e){console.error(e),_.ZP.error("Invalid database settings!")}break;case 2:await y()}};switch(e){case 1:v=(0,s.jsxs)(s.Fragment,{children:[s.jsx(a.Y,{label:"Database URL",placeholder:"1.1.1.1",errorMessage:h.errors.DB_HOST,isInvalid:!!h.errors.DB_HOST,type:"text",variant:"bordered",disabled:r,...h.getInputProps("DB_HOST")}),s.jsx(a.Y,{label:"Database User",placeholder:"root",errorMessage:h.errors.DB_USER,isInvalid:!!h.errors.DB_USER,type:"text",variant:"bordered",disabled:r,autoComplete:"off",...h.getInputProps("DB_USER")}),s.jsx(a.Y,{label:"Database Password",placeholder:"111111",errorMessage:h.errors.DB_PASSWORD,isInvalid:!!h.errors.DB_PASSWORD,type:"password",variant:"bordered",autoComplete:"off",disabled:r,...h.getInputProps("DB_PASSWORD")}),s.jsx(a.Y,{label:"Database Name",placeholder:"DB_NAME",errorMessage:h.errors.DB_DATABASE,isInvalid:!!h.errors.DB_DATABASE,type:"text",variant:"bordered",disabled:r,...h.getInputProps("DB_DATABASE")}),s.jsx(a.Y,{label:"Database Port",placeholder:"DB_PORT",errorMessage:h.errors.DB_PORT,isInvalid:!!h.errors.DB_PORT,type:"number",variant:"bordered",disabled:r,...h.getInputProps("DB_PORT")})]});break;case 2:v=(0,s.jsxs)(s.Fragment,{children:[s.jsx(a.Y,{label:"Website Domain",description:"The url of your website, e.g. https://example.com",placeholder:"https://example.com",errorMessage:h.errors.DOMAIN,isInvalid:!!h.errors.DOMAIN,type:"text",variant:"bordered",disabled:r,...h.getInputProps("DOMAIN")}),s.jsx(a.Y,{label:"Steam API Key",description:(0,s.jsxs)(s.Fragment,{children:["Get your Steam API key from"," ",s.jsx(b.default,{href:"https://steamcommunity.com/dev/apikey",target:"_blank",children:"https://steamcommunity.com/dev/apikey"})]}),placeholder:"eg, 74B762FA601616732",errorMessage:h.errors.STEAM_API_KEY,isInvalid:!!h.errors.STEAM_API_KEY,type:"text",variant:"bordered",disabled:r,...h.getInputProps("STEAM_API_KEY")}),s.jsx(a.Y,{label:"Master Admin",description:"Steam 64",placeholder:"eg, 76561198000000000",errorMessage:h.errors.MASTER_ADMIN,isInvalid:!!h.errors.MASTER_ADMIN,type:"text",variant:"bordered",disabled:r,...h.getInputProps("MASTER_ADMIN")})]});break;case 3:v=(0,s.jsxs)(s.Fragment,{children:[s.jsx("h2",{className:"text-3xl font-bold",children:"Setup complete!"}),s.jsx("p",{children:"Please restart the panel for the changes to take effect."})]})}return(0,s.jsxs)(l.w,{className:"container mx-auto my-auto",children:[s.jsx(u.u,{className:"flex flex-col items-start gap-2",children:s.jsx("h1",{className:"text-2xl font-bold",children:"Setup CSS-Panel"})}),s.jsx(d.G,{className:"flex flex-col gap-4 p-6",children:v}),(0,s.jsxs)(c.i,{className:"border-t relative flex items-center py-4 pt-6",children:[s.jsx(p.W,{value:e/3*100,className:"absolute top-0 w-full right-0 left-0 h-1.5",classNames:{track:"rounded-none"},color:"primary",size:"sm","aria-label":"Progress"}),s.jsx(f.A,{onClick:D,size:"lg",isLoading:r,color:"primary",className:"min-w-[200px] mx-auto",isDisabled:3===e,children:"Continue"})]})]})}},43281:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a,metadata:()=>n});var s=r(58585),i=r(97386);let n={title:"Setup",description:"Setup the application."},a=({children:e})=>i.Z.safeParse(process.env).success?(debug("Env already set, redirecting to main page."),(0,s.redirect)("/")):e},29065:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`/Users/amireliz/Documents/Projects/CSSPanel/Panel/app/setup/page.tsx#default`)},58585:(e,t,r)=>{"use strict";var s=r(61085);r.o(s,"notFound")&&r.d(t,{notFound:function(){return s.notFound}}),r.o(s,"redirect")&&r.d(t,{redirect:function(){return s.redirect}})},61085:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return a},RedirectType:function(){return s.RedirectType},notFound:function(){return i.notFound},permanentRedirect:function(){return s.permanentRedirect},redirect:function(){return s.redirect}});let s=r(83953),i=r(16399);class n extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class a extends URLSearchParams{append(){throw new n}delete(){throw new n}set(){throw new n}sort(){throw new n}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},16399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isNotFoundError:function(){return i},notFound:function(){return s}});let r="NEXT_NOT_FOUND";function s(){let e=Error(r);throw e.digest=r,e}function i(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8586:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},83953:(e,t,r)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return s},getRedirectError:function(){return l},getRedirectStatusCodeFromError:function(){return m},getRedirectTypeFromError:function(){return f},getURLFromRedirectError:function(){return p},isRedirectError:function(){return c},permanentRedirect:function(){return d},redirect:function(){return u}});let i=r(54580),n=r(72934),a=r(8586),o="NEXT_REDIRECT";function l(e,t,r){void 0===r&&(r=a.RedirectStatusCode.TemporaryRedirect);let s=Error(o);s.digest=o+";"+t+";"+e+";"+r+";";let n=i.requestAsyncStorage.getStore();return n&&(s.mutableCookies=n.mutableCookies),s}function u(e,t){void 0===t&&(t="replace");let r=n.actionAsyncStorage.getStore();throw l(e,t,(null==r?void 0:r.isAction)?a.RedirectStatusCode.SeeOther:a.RedirectStatusCode.TemporaryRedirect)}function d(e,t){void 0===t&&(t="replace");let r=n.actionAsyncStorage.getStore();throw l(e,t,(null==r?void 0:r.isAction)?a.RedirectStatusCode.SeeOther:a.RedirectStatusCode.PermanentRedirect)}function c(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r,s,i]=e.digest.split(";",4),n=Number(i);return t===o&&("replace"===r||"push"===r)&&"string"==typeof s&&!isNaN(n)&&n in a.RedirectStatusCode}function p(e){return c(e)?e.digest.split(";",3)[2]:null}function f(e){if(!c(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function m(e){if(!c(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(s||(s={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},97386:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(7410);let i=s.z.object({STEAM_API_KEY:s.z.string().min(1),SESSION_SECRET:s.z.string().min(1).optional(),DOMAIN:s.z.string().min(1),DB_HOST:s.z.string().min(1),DB_USER:s.z.string().min(1),DB_PASSWORD:s.z.string().min(1),DB_DATABASE:s.z.string().min(1),DB_PORT:s.z.string().min(1),MASTER_ADMIN:s.z.string().min(1)});s.z.object({DB_HOST:s.z.string().min(1),DB_USER:s.z.string().min(1),DB_PASSWORD:s.z.string().min(1),DB_DATABASE:s.z.string().min(1),DB_PORT:s.z.string().min(1)});let n=i},24663:(e,t,r)=>{"use strict";r.d(t,{u:()=>u});var s=r(82345),i=r(84521),n=r(10420),a=r(87281),o=r(10326),l=(0,i.Gp)((e,t)=>{var r;let{as:i,className:l,children:u,...d}=e,c=(0,n.gy)(t),{slots:p,classNames:f}=(0,s.R)(),m=(0,a.W)(null==f?void 0:f.header,l);return(0,o.jsx)(i||"div",{ref:c,className:null==(r=p.header)?void 0:r.call(p,{class:m}),...d,children:u})});l.displayName="NextUI.CardHeader";var u=l},18265:(e,t,r)=>{"use strict";r.d(t,{i:()=>u});var s=r(82345),i=r(84521),n=r(10420),a=r(87281),o=r(10326),l=(0,i.Gp)((e,t)=>{var r;let{as:i,className:l,children:u,...d}=e,c=(0,n.gy)(t),{slots:p,classNames:f}=(0,s.R)(),m=(0,a.W)(null==f?void 0:f.footer,l);return(0,o.jsx)(i||"div",{ref:c,className:null==(r=p.footer)?void 0:r.call(p,{class:m}),...d,children:u})});l.displayName="NextUI.CardFooter";var u=l}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[126,9507,5611,3072,3322,7260],()=>r(68850));module.exports=s})();
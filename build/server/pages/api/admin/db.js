"use strict";(()=>{var t={};t.id=3581,t.ids=[3581],t.modules={3498:t=>{t.exports=require("mysql2/promise")},13088:(t,e,n)=>{t.exports=n(75600)},28928:(t,e,n)=>{n.a(t,async(t,r)=>{try{n.r(e),n.d(e,{config:()=>A,default:()=>d,routeModule:()=>c});var i=n(13088),a=n(57987),s=n(77355),o=n(62411),u=t([o]);o=(u.then?(await u)():u)[0];let d=(0,s.M)(o,"default"),A=(0,s.M)(o,"config"),c=new i.PagesAPIRouteModule({definition:{kind:a.A.PAGES_API,page:"/api/admin/db",pathname:"/api/admin/db",bundlePath:"",filename:""},userland:o});r()}catch(t){r(t)}})},42971:t=>{t.exports=import("zod")},57987:(t,e)=>{Object.defineProperty(e,"A",{enumerable:!0,get:function(){return n}});var n=function(t){return t.PAGES="PAGES",t.PAGES_API="PAGES_API",t.APP_PAGE="APP_PAGE",t.APP_ROUTE="APP_ROUTE",t.IMAGE="IMAGE",t}({})},62411:(t,e,n)=>{n.a(t,async(t,r)=>{try{n.r(e),n.d(e,{default:()=>o});var i=n(3498),a=n(86852),s=t([a]);a=(s.then?(await s)():s)[0];let o=async(t,e)=>{let{method:n}=t;if("POST"===n)try{let{DB_DATABASE:n,DB_HOST:r,DB_PASSWORD:s,DB_PORT:o,DB_USER:u}=a.c.parse(t.body),d=await (0,i.createConnection)({host:r,user:u,password:s,database:n,port:parseInt(o)});return await d.end(),e.status(200).send("ok")}catch(t){return error(t),e.status(500).json(t)}return e.status(405).end()};r()}catch(t){r(t)}})},75600:t=>{t.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},77355:(t,e)=>{Object.defineProperty(e,"M",{enumerable:!0,get:function(){return function t(e,n){return n in e?e[n]:"then"in e&&"function"==typeof e.then?e.then(e=>t(e,n)):"function"==typeof e&&"default"===n?e:void 0}}})},86852:(t,e,n)=>{n.a(t,async(t,r)=>{try{n.d(e,{A:()=>u,c:()=>o});var i=n(42971),a=t([i]);let s=(i=(a.then?(await a)():a)[0]).z.object({STEAM_API_KEY:i.z.string().min(1),SESSION_SECRET:i.z.string().min(1).optional(),DOMAIN:i.z.string().min(1),DB_HOST:i.z.string().min(1),DB_USER:i.z.string().min(1),DB_PASSWORD:i.z.string().min(1),DB_DATABASE:i.z.string().min(1),DB_PORT:i.z.string().min(1),MASTER_ADMIN:i.z.string().min(1)}),o=i.z.object({DB_HOST:i.z.string().min(1),DB_USER:i.z.string().min(1),DB_PASSWORD:i.z.string().min(1),DB_DATABASE:i.z.string().min(1),DB_PORT:i.z.string().min(1)}),u=s;r()}catch(t){r(t)}})}};var e=require("../../../webpack-api-runtime.js");e.C(t);var n=e(e.s=28928);module.exports=n})();
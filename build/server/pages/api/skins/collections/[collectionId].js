"use strict";(()=>{var e={};e.id=2150,e.ids=[2150],e.modules={43582:e=>{e.exports=require("@fabricio-191/valve-server-query")},429:e=>{e.exports=require("cookie-session")},62418:e=>{e.exports=require("mysql2/promise")},20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},3511:e=>{e.exports=require("passport")},53686:e=>{e.exports=require("passport-steam")},99648:e=>{e.exports=import("axios")},97564:e=>{e.exports=import("chalk")},97612:e=>{e.exports=import("drizzle-orm")},99089:e=>{e.exports=import("drizzle-orm/mysql-core")},63024:e=>{e.exports=import("drizzle-orm/mysql2")},45616:e=>{e.exports=import("next-connect")},2782:e=>{e.exports=import("steam-api-sdk")},9926:e=>{e.exports=import("zod")},9609:(e,a,t)=>{t.a(e,async(e,n)=>{try{t.r(a),t.d(a,{config:()=>c,default:()=>_,routeModule:()=>p});var i=t(71802),r=t(47153),s=t(56249),o=t(53254),m=e([o]);o=(m.then?(await m)():m)[0];let _=(0,s.l)(o,"default"),c=(0,s.l)(o,"config"),p=new i.PagesAPIRouteModule({definition:{kind:r.x.PAGES_API,page:"/api/skins/collections/[collectionId]",pathname:"/api/skins/collections/[collectionId]",bundlePath:"",filename:""},userland:o});n()}catch(e){n(e)}})},53254:(e,a,t)=>{t.a(e,async(e,n)=>{try{t.r(a),t.d(a,{default:()=>h});var i=t(17011),r=t(7707),s=t(95473),o=t(17536),m=t(13744),_=t(16249),c=t(55939),p=t(99863),l=t(22692),w=t(89417),g=t(79173),d=t(6346),u=e([i,r,s,o,m,_,c,p,w,g,d]);[i,r,s,o,m,_,c,p,w,g,d]=u.then?(await u)():u;let h=async(e,a)=>{if(!g.Z)return a.status(500).json({message:"Database not connected"});if(!(await (0,p.ed)("skins-collections")).enabled)return a.status(404).json({message:"Module not found"});await d.Z.run(e,a);let{method:t}=e,{collectionId:n}=e.query,u=await (0,i.U9)(Number(n));if(!u)return a.status(404).json({message:"Collection not found"});switch(t){case"GET":try{return a.status(200).json(u)}catch(e){return console.error(e),a.status(500).json({message:"Internal server error"})}case"POST":{let t=await (0,w.Z)(e,a);if(!t)return;let n=u.json.skins?.map(e=>({...e,steamid:t.id}))||[];for await(let e of(u.json.agents&&(u.json.agents.agent_ct&&await (0,_.d$)(t.id,u.json.agents.agent_ct),u.json.agents.agent_t&&await (0,_.d$)(t.id,u.json.agents.agent_t)),u.json.gloves&&(Array.isArray(u.json.gloves)||u.json.gloves?.weapon_defindex)&&(Array.isArray(u.json.gloves)?u.json.gloves.map(async e=>e.weapon_defindex&&await (0,o.wb)(t.id,e.weapon_defindex,e.weapon_team||0)):u.json.gloves.weapon_defindex&&await (0,o.wb)(t.id,u.json.gloves.weapon_defindex,u.json.gloves.weapon_team||0)),u.json.knife&&(Array.isArray(u.json.knife)||u.json.knife?.knife)&&(Array.isArray(u.json.knife)?u.json.knife.map(async e=>e.knife&&await (0,c.PZ)(t.id,e.knife,e.weapon_team||0)):u.json.knife.knife&&await (0,c.PZ)(t.id,u.json.knife.knife,u.json.knife.weapon_team||0)),u.json.music&&(Array.isArray(u.json.music)||u.json.music?.music_id)&&(Array.isArray(u.json.music)?u.json.music.map(async e=>e.music_id&&await (0,s.Ze)(t.id,e.music_id,e.weapon_team||0)):u.json.music.music_id&&await (0,s.Ze)(t.id,u.json.music.music_id,u.json.music.weapon_team||0)),n))if(e.weapon_defindex&&e.weapon_paint_id){if(l.ku.filter(e=>!e.name.includes("Gloves")).find(a=>Number(a.weapon_defindex)===e.weapon_defindex)&&!l.g8.find(a=>a.weapon_defindex===e.weapon_defindex&&Number(a.paint_index)===e.weapon_paint_id))continue;await (0,m.xI)({steamid:t.id,weapon_defindex:e.weapon_defindex,weapon_paint_id:e.weapon_paint_id,weapon_wear:e.weapon_wear||0,weapon_seed:e.weapon_seed||0,weapon_team:e.weapon_team||0,weapon_stattrak:"weapon_stattrak"in e&&e.weapon_stattrak||0,weapon_nametag:e.weapon_nametag||null,weapon_keychain:"weapon_keychain"in e&&e.weapon_keychain?"string"==typeof e.weapon_keychain?(0,l.P_)(e.weapon_keychain):e.weapon_keychain:(0,l.P_)(),weapon_sticker_0:"weapon_sticker_0"in e&&e.weapon_sticker_0?"string"==typeof e.weapon_sticker_0?(0,l.qQ)(e.weapon_sticker_0):e.weapon_sticker_0:(0,l.qQ)(),weapon_sticker_1:"weapon_sticker_1"in e&&e.weapon_sticker_1?"string"==typeof e.weapon_sticker_1?(0,l.qQ)(e.weapon_sticker_1):e.weapon_sticker_1:(0,l.qQ)(),weapon_sticker_2:"weapon_sticker_2"in e&&e.weapon_sticker_2?"string"==typeof e.weapon_sticker_2?(0,l.qQ)(e.weapon_sticker_2):e.weapon_sticker_2:(0,l.qQ)(),weapon_sticker_3:"weapon_sticker_3"in e&&e.weapon_sticker_3?"string"==typeof e.weapon_sticker_3?(0,l.qQ)(e.weapon_sticker_3):e.weapon_sticker_3:(0,l.qQ)(),weapon_sticker_4:"weapon_sticker_4"in e&&e.weapon_sticker_4?"string"==typeof e.weapon_sticker_4?(0,l.qQ)(e.weapon_sticker_4):e.weapon_sticker_4:(0,l.qQ)()})}return(0,r.x)(`css_fexec ${t.id} css_wp`),a.status(201).end()}case"DELETE":try{let t=await (0,w.Z)(e,a);if(!t)return;if(t.id!==u.steamid)return a.status(403).json({message:"Forbidden"});return await (0,i.fe)(Number(n)),a.status(201).end()}catch(e){return console.error(e),a.status(500).json({message:"Internal server error"})}}};n()}catch(e){n(e)}})},7707:(e,a,t)=>{t.a(e,async(e,n)=>{try{t.d(a,{Z:()=>_,x:()=>m});var i=t(43582),r=t(79173),s=e([r]);r=(s.then?(await s)():s)[0];let o=async(e,a)=>{if(!r.Z)throw Error("Database not connected");try{let t=await r.Z.servers.getById(Number(e));if(!t)throw Error("Server not found");let{address:n,rcon:s}=t,[o,m]=n.split(":");if(!s)throw Error("Server has no rcon password");let _=await (0,i.RCON)({ip:o,port:Number(m),password:s,enableWarns:!0,retries:2,timeout:2e3});_.authenticate();let c=await _.exec(a);if(!c)return"No response from server";return c}catch(e){throw warn(`Error while sending rcon command: ${e}`),e}},m=async e=>{if(!r.Z)throw Error("Database not connected");let a=await r.Z.servers.getAll();return await Promise.all(a.map(async a=>{try{let t=await o(a.id,e);return{server:a.hostname,response:t}}catch(e){return{server:a.hostname,response:e}}}))},_=o;n()}catch(e){n(e)}})},6346:(e,a,t)=>{t.a(e,async(e,n)=>{try{t.d(a,{Z:()=>c});var i=t(79649),r=t(45616),s=t(429),o=t.n(s),m=e([r]);r=(m.then?(await m)():m)[0];let _=(0,r.default)();_.use(o()({secret:process.env.SESSION_SECRET||"secret",maxAge:10368e6})),_.use(i.Z.initialize()),_.use(i.Z.session());let c=_;n()}catch(e){n(e)}})},79649:(e,a,t)=>{t.d(a,{Z:()=>o});var n=t(3511),i=t.n(n),r=t(53686);i().serializeUser(async(e,a)=>{a(null,e)}),i().deserializeUser(async(e,a)=>{a(null,e)});let s=process.env.DOMAIN||"";s.startsWith("http")||(s=`https://${s}`),i().use(new r.Strategy({returnURL:`${s}/api/auth/return`,realm:`${s}/`,apiKey:process.env.STEAM_API_KEY||""},(e,a,t)=>(a.identifier=e,t(null,a))));let o=i()},89417:(e,a,t)=>{t.a(e,async(e,n)=>{try{t.d(a,{Z:()=>s});var i=t(79173),r=e([i]);i=(r.then?(await r)():r)[0];let s=(e,a)=>new Promise(async(t,n)=>i.Z?e.user?void t(e.user):n(a.status(400).json({success:!1,error:"Protected Route"})):a.status(500).json({message:"Database not connected"}));n()}catch(e){n(e)}})},16249:(e,a,t)=>{t.a(e,async(e,n)=>{try{t.d(a,{FJ:()=>_,d$:()=>c});var i=t(3929),r=t(88547),s=t(48057),o=t(97612),m=e([i,s,o]);[i,s,o]=m.then?(await m)():m;let _=async e=>{if(!s.of)throw Error("No mysql connection");try{return await s.of.query.wp_player_agents.findFirst({where:(0,o.eq)(i.wp_player_agents.steamid,e)})||{agent_ct:null,agent_t:null,steamid:e}}catch(a){return console.error(a),{agent_ct:null,agent_t:null,steamid:e}}},c=async(e,a)=>{if(!s.of)throw Error("No mysql connection");try{let t=r.B.find(e=>e.model===a)?.team;if(!t)throw Error("Invalid agent model");let n=2===t?"agent_t":"agent_ct";await s.of.insert(i.wp_player_agents).values({steamid:e,[n]:a}).onDuplicateKeyUpdate({set:{[n]:a}})}catch(e){throw Error("Failed to set player agent")}};n()}catch(e){n(e)}})},17011:(e,a,t)=>{t.a(e,async(e,n)=>{try{t.d(a,{Cz:()=>g,EH:()=>_,U9:()=>c,UQ:()=>u,YR:()=>l,dm:()=>d,fe:()=>p,sl:()=>w});var i=t(3929),r=t(97612),s=t(48057),o=t(78779),m=e([i,r,s,o]);[i,r,s,o]=m.then?(await m)():m;let _=async(e,a="CREATED")=>{if(!s.of)throw Error("No mysql connection");try{let t=(0,r.sql)`${o.Z.id} DESC`;switch(a){case"LIKES":t=(0,r.sql)`LENGTH(${o.Z.likes}) - LENGTH(REPLACE(${o.Z.likes}, ',', '')) DESC, ${o.Z.id} DESC`;break;case"CREATED":t=(0,r.sql)`${o.Z.id} DESC`}return(await s.of.select({id:o.Z.id,name:o.Z.name,steamid:o.Z.steamid,json:o.Z.json,likes:o.Z.likes,likes_count:(0,r.sql)`LENGTH(${o.Z.likes}) - LENGTH(REPLACE(${o.Z.likes}, ',', '')) as likes_count`,created_at:o.Z.created_at}).from(o.Z).where((0,r.eq)(i.wp_player_collections.steamid,e)).orderBy(t)).map(e=>({...e,json:JSON.parse(e.json),likes:JSON.parse(e.likes)}))}catch(e){return console.error(e),[]}},c=async e=>{if(!s.of)throw Error("No mysql connection");try{let a=await s.of.query.wp_player_collections.findFirst({where:(0,r.eq)(i.wp_player_collections.id,e)});if(!a)throw Error("Collection not found");return{...a,json:JSON.parse(a.json),likes:JSON.parse(a.likes)}}catch(e){throw console.error(`Error while getting collection by ID: ${e}`),Error("Collection not found")}},p=async e=>{if(!s.of)throw Error("No mysql connection");try{await s.of.delete(o.Z).where((0,r.eq)(i.wp_player_collections.id,e))}catch(e){throw console.error(`Error while deleting collection: ${e}`),Error("Failed to delete collection")}},l=async(e,a,t)=>{if(!s.of)throw Error("No mysql connection");try{await s.of.update(o.Z).set({json:JSON.stringify(t),name:a}).where((0,r.eq)(o.Z.id,e))}catch(e){throw console.error(`Error while updating collection: ${e}`),Error("Failed to update collection")}},w=async(e,a)=>{if(!s.of)throw Error("No mysql connection");try{await s.of.update(o.Z).set({likes:JSON.stringify(a)}).where((0,r.eq)(o.Z.id,e))}catch(e){throw console.error(`Error while updating collection likes: ${e}`),Error("Failed to update collection likes")}},g=async(e,a,t,n="CREATED")=>{if(!s.of)throw Error("No mysql connection");try{let i=t&&t.length>2?(0,r.or)((0,r.like)(o.Z.name,`%${t}%`),(0,r.like)(o.Z.steamid,`%${t}%`),(0,r.like)(o.Z.id,`%${t}%`)):void 0,m=(0,r.sql)`${o.Z.id} DESC`;switch(n){case"LIKES":m=(0,r.sql)`LENGTH(${o.Z.likes}) - LENGTH(REPLACE(${o.Z.likes}, ',', '')) DESC, ${o.Z.id} DESC`;break;case"CREATED":m=(0,r.sql)`${o.Z.id} DESC`}return(await s.of.select({id:o.Z.id,name:o.Z.name,steamid:o.Z.steamid,json:o.Z.json,likes:o.Z.likes,likes_count:(0,r.sql)`LENGTH(${o.Z.likes}) - LENGTH(REPLACE(${o.Z.likes}, ',', '')) as likes_count`,created_at:o.Z.created_at}).from(o.Z).where(i).orderBy(m).limit(a).offset((e-1)*a)).map(e=>({...e,json:JSON.parse(e.json),likes:JSON.parse(e.likes)}))}catch(e){return console.error(`[DB] Error while getting all skins collections: ${e}`),[]}},d=async e=>{if(!s.of)throw Error("No mysql connection");try{let a=e?(0,r.or)((0,r.like)(o.Z.steamid,`%${e}%`),(0,r.like)(o.Z.id,`%${e}%`)):void 0,[t]=await s.of.select({count:(0,r.sql)`COUNT(*)`}).from(o.Z).where(a);return t?.count??0}catch(e){return console.error(`[DB] Error while counting skins collections: ${e}`),0}},u=async(e,a,t)=>{if(!s.of)throw Error("No mysql connection");try{await s.of.insert(o.Z).values({steamid:e,name:a,json:JSON.stringify(t)})}catch(e){throw console.error(`Error while creating a new collection: ${e}`),Error("Failed to create a new collection")}};n()}catch(e){n(e)}})},88547:(e,a,t)=>{t.d(a,{B:()=>n});let n=JSON.parse('[{"team":2,"image":"","model":"null","agent_name":"Agent | Default"},{"team":3,"image":"","model":"null","agent_name":"Agent | Default"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4613.png","model":"tm_professional/tm_professional_varf5","agent_name":"Bloody Darryl The Strapped | The Professionals"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4619.png","model":"ctm_st6/ctm_st6_variantj","agent_name":"\'Blueberries\' Buckshot | NSWC SEAL"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4680.png","model":"ctm_st6/ctm_st6_variantl","agent_name":"\'Two Times\' McCoy | TACP Cavalry"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4711.png","model":"ctm_swat/ctm_swat_variante","agent_name":"Cmdr. Mae \'Dead Cold\' Jamison | SWAT"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4712.png","model":"ctm_swat/ctm_swat_variantf","agent_name":"1st Lieutenant Farlow | SWAT"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4713.png","model":"ctm_swat/ctm_swat_variantg","agent_name":"John \'Van Healen\' Kask | SWAT"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4714.png","model":"ctm_swat/ctm_swat_varianth","agent_name":"Bio-Haz Specialist | SWAT"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4715.png","model":"ctm_swat/ctm_swat_varianti","agent_name":"Sergeant Bombson | SWAT"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4716.png","model":"ctm_swat/ctm_swat_variantj","agent_name":"Chem-Haz Specialist | SWAT"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4718.png","model":"tm_balkan/tm_balkan_variantk","agent_name":"Rezan the Redshirt | Sabre"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4726.png","model":"tm_professional/tm_professional_varf","agent_name":"Sir Bloody Miami Darryl | The Professionals"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4727.png","model":"tm_professional/tm_professional_varg","agent_name":"Safecracker Voltzmann | The Professionals"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4728.png","model":"tm_professional/tm_professional_varh","agent_name":"Little Kev | The Professionals"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4730.png","model":"tm_professional/tm_professional_varj","agent_name":"Getaway Sally | The Professionals"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4732.png","model":"tm_professional/tm_professional_vari","agent_name":"Number K | The Professionals"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4733.png","model":"tm_professional/tm_professional_varf1","agent_name":"Sir Bloody Silent Darryl | The Professionals"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4734.png","model":"tm_professional/tm_professional_varf2","agent_name":"Sir Bloody Skullhead Darryl | The Professionals"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4735.png","model":"tm_professional/tm_professional_varf3","agent_name":"Sir Bloody Darryl Royale | The Professionals"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4736.png","model":"tm_professional/tm_professional_varf4","agent_name":"Sir Bloody Loudmouth Darryl | The Professionals"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4749.png","model":"ctm_gendarmerie/ctm_gendarmerie_varianta","agent_name":"Sous-Lieutenant Medic | Gendarmerie Nationale"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4750.png","model":"ctm_gendarmerie/ctm_gendarmerie_variantb","agent_name":"Chem-Haz Capitaine | Gendarmerie Nationale"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4751.png","model":"ctm_gendarmerie/ctm_gendarmerie_variantc","agent_name":"Chef d\'Escadron Rouchard | Gendarmerie Nationale"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4752.png","model":"ctm_gendarmerie/ctm_gendarmerie_variantd","agent_name":"Aspirant | Gendarmerie Nationale"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4753.png","model":"ctm_gendarmerie/ctm_gendarmerie_variante","agent_name":"Officer Jacques Beltram | Gendarmerie Nationale"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4756.png","model":"ctm_swat/ctm_swat_variantk","agent_name":"Lieutenant \'Tree Hugger\' Farlow | SWAT"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4757.png","model":"ctm_diver/ctm_diver_varianta","agent_name":"Cmdr. Davida \'Goggles\' Fernandez | SEAL Frogman"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4771.png","model":"ctm_diver/ctm_diver_variantb","agent_name":"Cmdr. Frank \'Wet Sox\' Baroud | SEAL Frogman"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4772.png","model":"ctm_diver/ctm_diver_variantc","agent_name":"Lieutenant Rex Krikey | SEAL Frogman"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4773.png","model":"tm_jungle_raider/tm_jungle_raider_varianta","agent_name":"Elite Trapper Solman | Guerrilla Warfare"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4774.png","model":"tm_jungle_raider/tm_jungle_raider_variantb","agent_name":"Crasswater The Forgotten | Guerrilla Warfare"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4775.png","model":"tm_jungle_raider/tm_jungle_raider_variantc","agent_name":"Arno The Overgrown | Guerrilla Warfare"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4776.png","model":"tm_jungle_raider/tm_jungle_raider_variantd","agent_name":"Col. Mangos Dabisi | Guerrilla Warfare"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4777.png","model":"tm_jungle_raider/tm_jungle_raider_variante","agent_name":"Vypa Sista of the Revolution | Guerrilla Warfare"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4778.png","model":"tm_jungle_raider/tm_jungle_raider_variantf","agent_name":"Trapper Aggressor | Guerrilla Warfare"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4780.png","model":"tm_jungle_raider/tm_jungle_raider_variantb2","agent_name":"\'Medium Rare\' Crasswater | Guerrilla Warfare"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4781.png","model":"tm_jungle_raider/tm_jungle_raider_variantf2","agent_name":"Trapper | Guerrilla Warfare"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5105.png","model":"tm_leet/tm_leet_variantg","agent_name":"Ground Rebel  | Elite Crew"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5106.png","model":"tm_leet/tm_leet_varianth","agent_name":"Osiris | Elite Crew"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5107.png","model":"tm_leet/tm_leet_varianti","agent_name":"Prof. Shahmat | Elite Crew"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5108.png","model":"tm_leet/tm_leet_variantf","agent_name":"The Elite Mr. Muhlik | Elite Crew"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5109.png","model":"tm_leet/tm_leet_variantj","agent_name":"Jungle Rebel | Elite Crew"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5205.png","model":"tm_phoenix/tm_phoenix_varianth","agent_name":"Soldier | Phoenix"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5206.png","model":"tm_phoenix/tm_phoenix_variantf","agent_name":"Enforcer | Phoenix"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5207.png","model":"tm_phoenix/tm_phoenix_variantg","agent_name":"Slingshot | Phoenix"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5208.png","model":"tm_phoenix/tm_phoenix_varianti","agent_name":"Street Soldier | Phoenix"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5305.png","model":"ctm_fbi/ctm_fbi_variantf","agent_name":"Operator | FBI SWAT"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5306.png","model":"ctm_fbi/ctm_fbi_variantg","agent_name":"Markus Delrow | FBI HRT"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5307.png","model":"ctm_fbi/ctm_fbi_varianth","agent_name":"Michael Syfers  | FBI Sniper"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5308.png","model":"ctm_fbi/ctm_fbi_variantb","agent_name":"Special Agent Ava | FBI"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5400.png","model":"ctm_st6/ctm_st6_variantk","agent_name":"3rd Commando Company | KSK"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5401.png","model":"ctm_st6/ctm_st6_variante","agent_name":"Seal Team 6 Soldier | NSWC SEAL"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5402.png","model":"ctm_st6/ctm_st6_variantg","agent_name":"Buckshot | NSWC SEAL"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5403.png","model":"ctm_st6/ctm_st6_variantm","agent_name":"\'Two Times\' McCoy | USAF TACP"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5404.png","model":"ctm_st6/ctm_st6_varianti","agent_name":"Lt. Commander Ricksaw | NSWC SEAL"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5405.png","model":"ctm_st6/ctm_st6_variantn","agent_name":"Primeiro Tenente | Brazilian 1st Battalion"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5500.png","model":"tm_balkan/tm_balkan_variantf","agent_name":"Dragomir | Sabre"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5501.png","model":"tm_balkan/tm_balkan_varianti","agent_name":"Maximus | Sabre"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5502.png","model":"tm_balkan/tm_balkan_variantg","agent_name":"Rezan The Ready | Sabre"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5503.png","model":"tm_balkan/tm_balkan_variantj","agent_name":"Blackwolf | Sabre"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5504.png","model":"tm_balkan/tm_balkan_varianth","agent_name":"\'The Doctor\' Romanov | Sabre"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5505.png","model":"tm_balkan/tm_balkan_variantl","agent_name":"Dragomir | Sabre Footsoldier"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5601.png","model":"ctm_sas/ctm_sas_variantf","agent_name":"B Squadron Officer | SAS"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5602.png","model":"ctm_sas/ctm_sas_variantg","agent_name":"D Squadron Officer | NZSAS"}]')},17536:(e,a,t)=>{t.a(e,async(e,n)=>{try{t.d(a,{Nf:()=>c,_q:()=>l,wb:()=>p});var i=t(22692),r=t(3929),s=t(13744),o=t(97612),m=t(48057),_=e([r,s,o,m]);[r,s,o,m]=_.then?(await _)():_;let c=async e=>{if(!m.of)throw Error("No mysql connection");try{let a=await m.of.query.wp_player_gloves.findFirst({where:(0,o.eq)(r.wp_player_gloves.steamid,e)})||{weapon_defindex:0,steamid:e,weapon_team:0};return await m.of.query.wp_player_skins.findFirst({where:(0,o.and)((0,o.eq)(r.wp_player_gloves.steamid,e),(0,o.eq)(r.wp_player_gloves.weapon_defindex,a.weapon_defindex))}).then(t=>t?{steamid:e,weapon_defindex:a.weapon_defindex,weapon_paint_id:t.weapon_paint_id,weapon_wear:t.weapon_wear,weapon_seed:t.weapon_seed,weapon_team:a.weapon_team}:{steamid:e,weapon_defindex:a.weapon_defindex,weapon_paint_id:0,weapon_wear:0,weapon_seed:0,weapon_team:a.weapon_team})}catch(a){return console.error(a),{weapon_defindex:0,steamid:e,weapon_paint_id:0,weapon_wear:0,weapon_seed:0,weapon_team:0}}},p=async(e,a,t)=>{if(!m.of)throw Error("No mysql connection");try{await m.of.insert(r.wp_player_gloves).values({steamid:e,weapon_defindex:a,weapon_team:t}).onDuplicateKeyUpdate({set:{weapon_defindex:a,weapon_team:t}})}catch(e){throw Error("Failed to set player agent")}},l=async({steamid:e,weapon_defindex:a,weapon_paint_id:t,weapon_wear:n,weapon_seed:r,weapon_team:o})=>{try{p(e,a,o||0),(0,s.xI)({steamid:e,weapon_defindex:a,weapon_paint_id:t,weapon_wear:n,weapon_seed:r,weapon_team:o,weapon_keychain:i.Me,weapon_sticker_0:i.x8,weapon_sticker_1:i.x8,weapon_sticker_2:i.x8,weapon_sticker_3:i.x8,weapon_sticker_4:i.x8,weapon_nametag:null,weapon_stattrak:0})}catch(e){throw Error("Failed to set player agent")}};n()}catch(e){n(e)}})},55939:(e,a,t)=>{t.a(e,async(e,n)=>{try{t.d(a,{$H:()=>w,PZ:()=>l,kJ:()=>p,mM:()=>c});var i=t(22692),r=t(3929),s=t(13744),o=t(97612),m=t(48057),_=e([r,s,o,m]);[r,s,o,m]=_.then?(await _)():_;let c=async e=>{if(!m.of)throw Error("No mysql connection");try{let{knife:a,weapon_team:t}=await m.of.query.wp_player_knife.findFirst({where:(0,o.eq)(r.wp_player_knife.steamid,e)})||{knife:"",steamid:e,weapon_team:0};return await m.of.query.wp_player_skins.findFirst({where:(0,o.and)((0,o.eq)(r.wp_player_skins.steamid,e),(0,o.eq)(r.wp_player_skins.weapon_defindex,0))}).then(n=>n?{steamid:e,weapon_defindex:0,weapon_paint_id:n.weapon_paint_id,weapon_wear:n.weapon_wear,weapon_seed:n.weapon_seed,knife:a,weapon_stattrak:n.weapon_stattrak,weapon_stattrak_count:n.weapon_stattrak_count,weapon_team:t||0,weapon_nametag:n.weapon_nametag}:{steamid:e,weapon_defindex:0,weapon_paint_id:0,weapon_wear:0,weapon_seed:0,knife:a,weapon_stattrak:0,weapon_stattrak_count:0,weapon_team:t||0,weapon_nametag:null})}catch(a){return console.error("Failed to get player knife",a),{knife:"",steamid:e,weapon_defindex:0,weapon_paint_id:0,weapon_wear:0,weapon_seed:0,weapon_nametag:null,weapon_stattrak:0,weapon_team:0}}},p=async({steamid:e,weapon_defindex:a,weapon_paint_id:t,weapon_seed:n,weapon_wear:r,weapon_nametag:o,weapon_stattrak:m,weapon_team:_})=>{try{let c=i.ku.find(e=>e.weapon_defindex===a)||null;if(!c)throw Error("Invalid weapon defindex");l(e,c.id,_||0),(0,s.xI)({steamid:e,weapon_defindex:a,weapon_paint_id:t,weapon_wear:r,weapon_seed:n,weapon_nametag:o,weapon_stattrak:m,weapon_team:_,weapon_keychain:i.Me,weapon_sticker_0:i.x8,weapon_sticker_1:i.x8,weapon_sticker_2:i.x8,weapon_sticker_3:i.x8,weapon_sticker_4:i.x8})}catch(e){throw Error(e)}},l=async(e,a,t)=>{if(!m.of)throw Error("No mysql connection");try{await m.of.insert(r.wp_player_knife).values({steamid:e,knife:a,weapon_team:t}).onDuplicateKeyUpdate({set:{knife:a,weapon_team:t}})}catch(e){throw Error(e)}},w=async e=>{if(!m.of)throw Error("No mysql connection");try{await m.of.delete(r.wp_player_knife).where((0,o.eq)(r.wp_player_knife.steamid,e))}catch(e){throw Error(e)}};n()}catch(e){n(e)}})},95473:(e,a,t)=>{t.a(e,async(e,n)=>{try{t.d(a,{ID:()=>m,Ze:()=>_});var i=t(3929),r=t(97612),s=t(48057),o=e([i,r,s]);[i,r,s]=o.then?(await o)():o;let m=async e=>{if(!s.of)throw Error("No mysql connection");try{return await s.of.query.wp_player_music.findMany({where:(0,r.eq)(i.wp_player_music.steamid,e)})||{music_id:0,steamid:e,weapon_team:0}}catch(e){return console.error(e),[]}},_=async(e,a,t)=>{if(!s.of)throw Error("No mysql connection");try{0===t?await s.of.delete(i.wp_player_music).where((0,r.eq)(i.wp_player_music.steamid,e)):await s.of.delete(i.wp_player_music).where((0,r.and)((0,r.eq)(i.wp_player_music.steamid,e),(0,r.eq)(i.wp_player_music.weapon_team,0))),await s.of.insert(i.wp_player_music).values({steamid:e,music_id:a,weapon_team:t}).onDuplicateKeyUpdate({set:{music_id:a,weapon_team:t}})}catch(e){throw Error("Failed to set player agent")}};n()}catch(e){n(e)}})},13744:(e,a,t)=>{t.a(e,async(e,n)=>{try{t.d(a,{YE:()=>p,jx:()=>_,xI:()=>c});var i=t(22692),r=t(3929),s=t(97612),o=t(48057),m=e([r,s,o]);[r,s,o]=m.then?(await m)():m;let _=async e=>{if(!o.of)throw Error("No mysql connection");try{return(await o.of.query.wp_player_skins.findMany({where:(0,s.eq)(r.wp_player_skins.steamid,e)})||[{weapon_defindex:0,weapon_paint_id:0,weapon_seed:0,weapon_wear:1e-6,steamid:e}]).map(e=>({...e,weapon_sticker_0:(0,i.qQ)(e.weapon_sticker_0),weapon_sticker_1:(0,i.qQ)(e.weapon_sticker_1),weapon_sticker_2:(0,i.qQ)(e.weapon_sticker_2),weapon_sticker_3:(0,i.qQ)(e.weapon_sticker_3),weapon_sticker_4:(0,i.qQ)(e.weapon_sticker_4),weapon_keychain:(0,i.P_)(e.weapon_keychain)}))}catch(e){return console.error(e),[]}},c=async({steamid:e,weapon_defindex:a,weapon_wear:t,weapon_team:n,...m})=>{if(!o.of)throw Error("No mysql connection");try{if(0===n)console.debug("SetPlayerSkin","weapon_team is 0, removing all skins with the same defindex"),await o.of.delete(r.wp_player_skins).where((0,s.and)((0,s.eq)(r.wp_player_skins.steamid,e),(0,s.eq)(r.wp_player_skins.weapon_defindex,a)));else{let t=await o.of.select().from(r.wp_player_skins).where((0,s.and)((0,s.eq)(r.wp_player_skins.steamid,e),(0,s.eq)(r.wp_player_skins.weapon_defindex,a)));console.debug("SetPlayerSkin","weapon_team is not 0, removing all skins with the same defindex and team"),await o.of.delete(r.wp_player_skins).where((0,s.and)((0,s.eq)(r.wp_player_skins.steamid,e),(0,s.eq)(r.wp_player_skins.weapon_defindex,a),(0,s.eq)(r.wp_player_skins.weapon_team,n)));let i=t.some(e=>0===e.weapon_team),m=t.some(e=>0!==e.weapon_team&&e.weapon_team!==n);console.log({hasTeam0:i,hasOppositeTeam:m,itemSkins:t}),i&&m?(console.debug("SetPlayerSkin","removing team 0 skin"),await o.of.delete(r.wp_player_skins).where((0,s.and)((0,s.eq)(r.wp_player_skins.steamid,e),(0,s.eq)(r.wp_player_skins.weapon_defindex,a),(0,s.eq)(r.wp_player_skins.weapon_team,0)))):i&&await o.of.update(r.wp_player_skins).set({weapon_team:2===n?3:2}).where((0,s.and)((0,s.eq)(r.wp_player_skins.steamid,e),(0,s.eq)(r.wp_player_skins.weapon_defindex,a),(0,s.eq)(r.wp_player_skins.weapon_team,0)))}let[_]=await o.of.update(r.wp_player_skins).set({...m,weapon_wear:0===t?0:t,weapon_keychain:(0,i.Ky)(m.weapon_keychain),weapon_sticker_0:(0,i.i1)(m.weapon_sticker_0),weapon_sticker_1:(0,i.i1)(m.weapon_sticker_1),weapon_sticker_2:(0,i.i1)(m.weapon_sticker_2),weapon_sticker_3:(0,i.i1)(m.weapon_sticker_3),weapon_sticker_4:(0,i.i1)(m.weapon_sticker_4)}).where((0,s.and)((0,s.eq)(r.wp_player_skins.steamid,e),(0,s.eq)(r.wp_player_skins.weapon_defindex,a),0===n?void 0:(0,s.eq)(r.wp_player_skins.weapon_team,n)));0===_.affectedRows&&await o.of.insert(r.wp_player_skins).values({...m,steamid:e,weapon_defindex:a,weapon_team:n,weapon_wear:0===t?0:t,weapon_keychain:(0,i.Ky)(m.weapon_keychain),weapon_sticker_0:(0,i.i1)(m.weapon_sticker_0),weapon_sticker_1:(0,i.i1)(m.weapon_sticker_1),weapon_sticker_2:(0,i.i1)(m.weapon_sticker_2),weapon_sticker_3:(0,i.i1)(m.weapon_sticker_3),weapon_sticker_4:(0,i.i1)(m.weapon_sticker_4)})}catch(e){throw Error(`Failed to set player skin ${e}`)}},p=async(e,a,t)=>{if(!o.of)throw Error("No mysql connection");try{await o.of.delete(r.wp_player_skins).where((0,s.and)((0,s.eq)(r.wp_player_skins.steamid,e),(0,s.eq)(r.wp_player_skins.weapon_defindex,a),(0,s.eq)(r.wp_player_skins.weapon_team,t)))}catch(e){throw Error("Failed to delete player skin")}};n()}catch(e){n(e)}})}};var a=require("../../../../webpack-api-runtime.js");a.C(e);var t=e=>a(a.s=e),n=a.X(0,[3337],()=>t(9609));module.exports=n})();
"use strict";(()=>{var e={};e.id=8349,e.ids=[8349],e.modules={43582:e=>{e.exports=require("@fabricio-191/valve-server-query")},429:e=>{e.exports=require("cookie-session")},62418:e=>{e.exports=require("mysql2/promise")},20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},3511:e=>{e.exports=require("passport")},53686:e=>{e.exports=require("passport-steam")},99648:e=>{e.exports=import("axios")},97564:e=>{e.exports=import("chalk")},97612:e=>{e.exports=import("drizzle-orm")},99089:e=>{e.exports=import("drizzle-orm/mysql-core")},63024:e=>{e.exports=import("drizzle-orm/mysql2")},45616:e=>{e.exports=import("next-connect")},2782:e=>{e.exports=import("steam-api-sdk")},9926:e=>{e.exports=import("zod")},63964:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.r(t),a.d(t,{config:()=>l,default:()=>g,routeModule:()=>c});var i=a(71802),s=a(47153),r=a(56249),m=a(11384),o=e([m]);m=(o.then?(await o)():o)[0];let g=(0,r.l)(m,"default"),l=(0,r.l)(m,"config"),c=new i.PagesAPIRouteModule({definition:{kind:s.x.PAGES_API,page:"/api/skins/agents",pathname:"/api/skins/agents",bundlePath:"",filename:""},userland:m});n()}catch(e){n(e)}})},11384:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.r(t),a.d(t,{default:()=>c});var i=a(7707),s=a(16249),r=a(99863),m=a(89417),o=a(79173),g=a(6346),l=e([i,s,r,m,o,g]);[i,s,r,m,o,g]=l.then?(await l)():l;let c=async(e,t)=>{if(!o.Z)return t.status(500).json({message:"Database not connected"});if(!(await (0,r.ed)("skins")).enabled)return t.status(404).json({message:"Module not found"});await g.Z.run(e,t);let{method:a}=e,n=await (0,m.Z)(e,t);if(n)switch(a){case"GET":try{let e=await (0,s.FJ)(n.id);return t.status(200).json(e)}catch(e){return console.error(e),t.status(500).json({message:"Internal server error"})}case"POST":try{let{agent:a}=e.body;if(!a)return t.status(400).json({message:"Missing parameters"});return await (0,s.d$)(n.id,a),(0,i.x)(`css_fexec ${n.id} css_wp`),t.status(200).json({message:"Agents set"})}catch(e){return console.error(e),t.status(500).json({message:"Internal server error"})}}};n()}catch(e){n(e)}})},7707:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>g,x:()=>o});var i=a(43582),s=a(79173),r=e([s]);s=(r.then?(await r)():r)[0];let m=async(e,t)=>{if(!s.Z)throw Error("Database not connected");try{let a=await s.Z.servers.getById(Number(e));if(!a)throw Error("Server not found");let{address:n,rcon:r}=a,[m,o]=n.split(":");if(!r)throw Error("Server has no rcon password");let g=await (0,i.RCON)({ip:m,port:Number(o),password:r,enableWarns:!0,retries:2,timeout:2e3});g.authenticate();let l=await g.exec(t);if(!l)return"No response from server";return l}catch(e){throw warn(`Error while sending rcon command: ${e}`),e}},o=async e=>{if(!s.Z)throw Error("Database not connected");let t=await s.Z.servers.getAll();return await Promise.all(t.map(async t=>{try{let a=await m(t.id,e);return{server:t.hostname,response:a}}catch(e){return{server:t.hostname,response:e}}}))},g=m;n()}catch(e){n(e)}})},6346:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>l});var i=a(79649),s=a(45616),r=a(429),m=a.n(r),o=e([s]);s=(o.then?(await o)():o)[0];let g=(0,s.default)();g.use(m()({secret:process.env.SESSION_SECRET||"secret",maxAge:10368e6})),g.use(i.Z.initialize()),g.use(i.Z.session());let l=g;n()}catch(e){n(e)}})},79649:(e,t,a)=>{a.d(t,{Z:()=>m});var n=a(3511),i=a.n(n),s=a(53686);i().serializeUser(async(e,t)=>{t(null,e)}),i().deserializeUser(async(e,t)=>{t(null,e)});let r=process.env.DOMAIN||"";r.startsWith("http")||(r=`https://${r}`),i().use(new s.Strategy({returnURL:`${r}/api/auth/return`,realm:`${r}/`,apiKey:process.env.STEAM_API_KEY||""},(e,t,a)=>(t.identifier=e,a(null,t))));let m=i()},89417:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>r});var i=a(79173),s=e([i]);i=(s.then?(await s)():s)[0];let r=(e,t)=>new Promise(async(a,n)=>i.Z?e.user?void a(e.user):n(t.status(400).json({success:!1,error:"Protected Route"})):t.status(500).json({message:"Database not connected"}));n()}catch(e){n(e)}})},16249:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{FJ:()=>g,d$:()=>l});var i=a(3929),s=a(88547),r=a(48057),m=a(97612),o=e([i,r,m]);[i,r,m]=o.then?(await o)():o;let g=async e=>{if(!r.of)throw Error("No mysql connection");try{return await r.of.query.wp_player_agents.findFirst({where:(0,m.eq)(i.wp_player_agents.steamid,e)})||{agent_ct:null,agent_t:null,steamid:e}}catch(t){return console.error(t),{agent_ct:null,agent_t:null,steamid:e}}},l=async(e,t)=>{if(!r.of)throw Error("No mysql connection");try{let a=s.B.find(e=>e.model===t)?.team;if(!a)throw Error("Invalid agent model");let n=2===a?"agent_t":"agent_ct";await r.of.insert(i.wp_player_agents).values({steamid:e,[n]:t}).onDuplicateKeyUpdate({set:{[n]:t}})}catch(e){throw Error("Failed to set player agent")}};n()}catch(e){n(e)}})},88547:(e,t,a)=>{a.d(t,{B:()=>n});let n=JSON.parse('[{"team":2,"image":"","model":"null","agent_name":"Agent | Default"},{"team":3,"image":"","model":"null","agent_name":"Agent | Default"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4613.png","model":"tm_professional/tm_professional_varf5","agent_name":"Bloody Darryl The Strapped | The Professionals"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4619.png","model":"ctm_st6/ctm_st6_variantj","agent_name":"\'Blueberries\' Buckshot | NSWC SEAL"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4680.png","model":"ctm_st6/ctm_st6_variantl","agent_name":"\'Two Times\' McCoy | TACP Cavalry"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4711.png","model":"ctm_swat/ctm_swat_variante","agent_name":"Cmdr. Mae \'Dead Cold\' Jamison | SWAT"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4712.png","model":"ctm_swat/ctm_swat_variantf","agent_name":"1st Lieutenant Farlow | SWAT"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4713.png","model":"ctm_swat/ctm_swat_variantg","agent_name":"John \'Van Healen\' Kask | SWAT"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4714.png","model":"ctm_swat/ctm_swat_varianth","agent_name":"Bio-Haz Specialist | SWAT"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4715.png","model":"ctm_swat/ctm_swat_varianti","agent_name":"Sergeant Bombson | SWAT"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4716.png","model":"ctm_swat/ctm_swat_variantj","agent_name":"Chem-Haz Specialist | SWAT"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4718.png","model":"tm_balkan/tm_balkan_variantk","agent_name":"Rezan the Redshirt | Sabre"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4726.png","model":"tm_professional/tm_professional_varf","agent_name":"Sir Bloody Miami Darryl | The Professionals"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4727.png","model":"tm_professional/tm_professional_varg","agent_name":"Safecracker Voltzmann | The Professionals"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4728.png","model":"tm_professional/tm_professional_varh","agent_name":"Little Kev | The Professionals"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4730.png","model":"tm_professional/tm_professional_varj","agent_name":"Getaway Sally | The Professionals"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4732.png","model":"tm_professional/tm_professional_vari","agent_name":"Number K | The Professionals"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4733.png","model":"tm_professional/tm_professional_varf1","agent_name":"Sir Bloody Silent Darryl | The Professionals"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4734.png","model":"tm_professional/tm_professional_varf2","agent_name":"Sir Bloody Skullhead Darryl | The Professionals"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4735.png","model":"tm_professional/tm_professional_varf3","agent_name":"Sir Bloody Darryl Royale | The Professionals"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4736.png","model":"tm_professional/tm_professional_varf4","agent_name":"Sir Bloody Loudmouth Darryl | The Professionals"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4749.png","model":"ctm_gendarmerie/ctm_gendarmerie_varianta","agent_name":"Sous-Lieutenant Medic | Gendarmerie Nationale"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4750.png","model":"ctm_gendarmerie/ctm_gendarmerie_variantb","agent_name":"Chem-Haz Capitaine | Gendarmerie Nationale"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4751.png","model":"ctm_gendarmerie/ctm_gendarmerie_variantc","agent_name":"Chef d\'Escadron Rouchard | Gendarmerie Nationale"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4752.png","model":"ctm_gendarmerie/ctm_gendarmerie_variantd","agent_name":"Aspirant | Gendarmerie Nationale"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4753.png","model":"ctm_gendarmerie/ctm_gendarmerie_variante","agent_name":"Officer Jacques Beltram | Gendarmerie Nationale"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4756.png","model":"ctm_swat/ctm_swat_variantk","agent_name":"Lieutenant \'Tree Hugger\' Farlow | SWAT"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4757.png","model":"ctm_diver/ctm_diver_varianta","agent_name":"Cmdr. Davida \'Goggles\' Fernandez | SEAL Frogman"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4771.png","model":"ctm_diver/ctm_diver_variantb","agent_name":"Cmdr. Frank \'Wet Sox\' Baroud | SEAL Frogman"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4772.png","model":"ctm_diver/ctm_diver_variantc","agent_name":"Lieutenant Rex Krikey | SEAL Frogman"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4773.png","model":"tm_jungle_raider/tm_jungle_raider_varianta","agent_name":"Elite Trapper Solman | Guerrilla Warfare"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4774.png","model":"tm_jungle_raider/tm_jungle_raider_variantb","agent_name":"Crasswater The Forgotten | Guerrilla Warfare"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4775.png","model":"tm_jungle_raider/tm_jungle_raider_variantc","agent_name":"Arno The Overgrown | Guerrilla Warfare"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4776.png","model":"tm_jungle_raider/tm_jungle_raider_variantd","agent_name":"Col. Mangos Dabisi | Guerrilla Warfare"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4777.png","model":"tm_jungle_raider/tm_jungle_raider_variante","agent_name":"Vypa Sista of the Revolution | Guerrilla Warfare"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4778.png","model":"tm_jungle_raider/tm_jungle_raider_variantf","agent_name":"Trapper Aggressor | Guerrilla Warfare"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4780.png","model":"tm_jungle_raider/tm_jungle_raider_variantb2","agent_name":"\'Medium Rare\' Crasswater | Guerrilla Warfare"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-4781.png","model":"tm_jungle_raider/tm_jungle_raider_variantf2","agent_name":"Trapper | Guerrilla Warfare"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5105.png","model":"tm_leet/tm_leet_variantg","agent_name":"Ground Rebel  | Elite Crew"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5106.png","model":"tm_leet/tm_leet_varianth","agent_name":"Osiris | Elite Crew"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5107.png","model":"tm_leet/tm_leet_varianti","agent_name":"Prof. Shahmat | Elite Crew"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5108.png","model":"tm_leet/tm_leet_variantf","agent_name":"The Elite Mr. Muhlik | Elite Crew"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5109.png","model":"tm_leet/tm_leet_variantj","agent_name":"Jungle Rebel | Elite Crew"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5205.png","model":"tm_phoenix/tm_phoenix_varianth","agent_name":"Soldier | Phoenix"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5206.png","model":"tm_phoenix/tm_phoenix_variantf","agent_name":"Enforcer | Phoenix"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5207.png","model":"tm_phoenix/tm_phoenix_variantg","agent_name":"Slingshot | Phoenix"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5208.png","model":"tm_phoenix/tm_phoenix_varianti","agent_name":"Street Soldier | Phoenix"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5305.png","model":"ctm_fbi/ctm_fbi_variantf","agent_name":"Operator | FBI SWAT"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5306.png","model":"ctm_fbi/ctm_fbi_variantg","agent_name":"Markus Delrow | FBI HRT"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5307.png","model":"ctm_fbi/ctm_fbi_varianth","agent_name":"Michael Syfers  | FBI Sniper"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5308.png","model":"ctm_fbi/ctm_fbi_variantb","agent_name":"Special Agent Ava | FBI"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5400.png","model":"ctm_st6/ctm_st6_variantk","agent_name":"3rd Commando Company | KSK"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5401.png","model":"ctm_st6/ctm_st6_variante","agent_name":"Seal Team 6 Soldier | NSWC SEAL"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5402.png","model":"ctm_st6/ctm_st6_variantg","agent_name":"Buckshot | NSWC SEAL"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5403.png","model":"ctm_st6/ctm_st6_variantm","agent_name":"\'Two Times\' McCoy | USAF TACP"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5404.png","model":"ctm_st6/ctm_st6_varianti","agent_name":"Lt. Commander Ricksaw | NSWC SEAL"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5405.png","model":"ctm_st6/ctm_st6_variantn","agent_name":"Primeiro Tenente | Brazilian 1st Battalion"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5500.png","model":"tm_balkan/tm_balkan_variantf","agent_name":"Dragomir | Sabre"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5501.png","model":"tm_balkan/tm_balkan_varianti","agent_name":"Maximus | Sabre"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5502.png","model":"tm_balkan/tm_balkan_variantg","agent_name":"Rezan The Ready | Sabre"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5503.png","model":"tm_balkan/tm_balkan_variantj","agent_name":"Blackwolf | Sabre"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5504.png","model":"tm_balkan/tm_balkan_varianth","agent_name":"\'The Doctor\' Romanov | Sabre"},{"team":2,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5505.png","model":"tm_balkan/tm_balkan_variantl","agent_name":"Dragomir | Sabre Footsoldier"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5601.png","model":"ctm_sas/ctm_sas_variantf","agent_name":"B Squadron Officer | SAS"},{"team":3,"image":"https://raw.githubusercontent.com/Nereziel/cs2-WeaponPaints/main/website/img/skins/agent-5602.png","model":"ctm_sas/ctm_sas_variantg","agent_name":"D Squadron Officer | NZSAS"}]')}};var t=require("../../../webpack-api-runtime.js");t.C(e);var a=e=>t(t.s=e),n=t.X(0,[3337],()=>a(63964));module.exports=n})();
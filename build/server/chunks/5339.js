"use strict";exports.id=5339,exports.ids=[5339],exports.modules={65339:(e,t,r)=>{r.d(t,{v1:()=>_});var n="object"==typeof localStorage&&(localStorage.getItem("debug")?.includes("next-usequerystate")||localStorage.getItem("debug")?.includes("nuqs"))||!1;function l(e,...t){if(!n)return;let r=function(e,...t){return e.replace(/%[sfdO]/g,e=>{let r=t.shift();return"%O"===e&&r?JSON.stringify(r).replace(/"([^"]+)":/g,"$1:"):String(r)})}(e,...t);performance.mark(r),console.log(e,...t)}function s(e,t,r){try{return e(t)}catch(e){return function(e,...t){n&&console.warn(e,...t)}("[nuqs] Error while parsing value `%s`: %O"+(r?" (for key `%s`)":""),t,e,r),null}}function a(e){function t(t){if(void 0===t)return null;let r="";if(Array.isArray(t)){if(void 0===t[0])return null;r=t[0]}return"string"==typeof t&&(r=t),s(e.parse,r)}return{...e,parseServerSide:t,withDefault(e){return{...this,defaultValue:e,parseServerSide:r=>t(r)??e}},withOptions(e){return{...this,...e}}}}a({parse:e=>e,serialize:e=>`${e}`}),a({parse:e=>{let t=parseInt(e);return Number.isNaN(t)?null:t},serialize:e=>Math.round(e).toFixed()}),a({parse:e=>{let t=parseInt(e,16);return Number.isNaN(t)?null:t},serialize:e=>{let t=Math.round(e).toString(16);return t.padStart(t.length+t.length%2,"0")}}),a({parse:e=>{let t=parseFloat(e);return Number.isNaN(t)?null:t},serialize:e=>e.toString()}),a({parse:e=>"true"===e,serialize:e=>e?"true":"false"}),a({parse:e=>{let t=parseInt(e);return Number.isNaN(t)?null:new Date(t)},serialize:e=>e.valueOf().toString()}),a({parse:e=>{let t=new Date(e);return Number.isNaN(t.valueOf())?null:t},serialize:e=>e.toISOString()});var o={409:"Multiple versions of the library are loaded. This may lead to unexpected behavior. Currently using %s, but %s was about to load on top.",429:"URL update rate-limited by the browser. Consider increasing `throttleMs` for keys %s. %O",500:"Empty search params cache. Search params can't be accessed in Layouts.",501:"Search params cache already populated. Have you called `parse` twice?"};function i(e){return`[nuqs] ${o[e]}
  See https://err.47ng.com/NUQS-${e}`}var u=r(36065),c=r(22173),h=new Map,f={history:"replace",scroll:!1,shallow:!0,throttleMs:50},p=new Set,g=0,y=null;function m(e){return h.get(e)??null}function d(e,t){return(e.split("#")[0]??"")+function(e){if(0===e.size)return"";let t=[];for(let[r,n]of e.entries())t.push(`${r}=${n.replace(/%/g,"%25").replace(/\+/g,"%2B").replace(/ /g,"+").replace(/#/g,"%23").replace(/&/g,"%26").replace(/"/g,"%22").replace(/'/g,"%27").replace(/`/g,"%60").replace(/</g,"%3C").replace(/>/g,"%3E")}`);return"?"+t.join("&")}(t)+location.hash}var w=Symbol("__nuqs__SYNC__"),S="__nuqs__NO_SYNC__",q=Symbol("__nuqs__NOTIFY__"),b=function(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(e){e(r)}),(n=e.get("*"))&&n.slice().map(function(e){e(t,r)})}}}();function _(e,{history:t="replace",shallow:r=!0,scroll:n=!1,throttleMs:a=50,parse:o=e=>e,serialize:q=String,defaultValue:_,startTransition:v}={history:"replace",scroll:!1,shallow:!0,throttleMs:50,parse:e=>e,serialize:String,defaultValue:void 0}){let N=(0,u.useRouter)(),O=(0,u.useSearchParams)(),[M,x]=c.useState(()=>{let t=m(e),r="object"!=typeof location?O?.get(e)??null:new URLSearchParams(location.search).get(e)??null,n=t??r;return null===n?null:s(o,n,e)}),T=c.useRef(M);l("[nuqs `%s`] render - state: %O, iSP: %s",e,M,O?.get(e)??null),c.useEffect(()=>{if(window.next?.version!=="14.0.3")return;let t=O.get(e)??null,r=null===t?null:s(o,t,e);l("[nuqs `%s`] syncFromUseSearchParams %O",e,r),T.current=r,x(r)},[O?.get(e),e]),c.useInsertionEffect(()=>{function t(t){l("[nuqs `%s`] updateInternalState %O",e,t),T.current=t,x(t)}function r(r){let n=r.get(e)??null,a=null===n?null:s(o,n,e);l("[nuqs `%s`] syncFromURL %O",e,a),t(a)}return l("[nuqs `%s`] subscribing to sync",e),b.on(w,r),b.on(e,t),()=>{l("[nuqs `%s`] unsubscribing from sync",e),b.off(w,r),b.off(e,t)}},[e]);let P=c.useCallback((s,o={})=>{let u="function"==typeof s?s(T.current??_??null):s;return b.emit(e,u),function(e,t,r,n){let s=null===t?null:r(t);l("[nuqs queue] Enqueueing %s=%s %O",e,s,n),h.set(e,s),"push"===n.history&&(f.history="push"),n.scroll&&(f.scroll=!0),!1===n.shallow&&(f.shallow=!1),n.startTransition&&(p.add(n.startTransition),f.shallow=!1),f.throttleMs=Math.max(n.throttleMs??50,Number.isFinite(f.throttleMs)?f.throttleMs:0)}(e,u,q,{history:o.history??t,shallow:o.shallow??r,scroll:o.scroll??n,throttleMs:o.throttleMs??a,startTransition:o.startTransition??v}),null===y&&(y=new Promise((e,t)=>{if(!Number.isFinite(f.throttleMs)){l("[nuqs queue] Skipping flush due to throttleMs=Infinity"),e(new URLSearchParams(location.search)),setTimeout(()=>{y=null},0);return}function r(){g=performance.now();let[r,n]=function(e){let t=new URLSearchParams(location.search);if(0===h.size)return[t,null];let r=Array.from(h.entries()),n={...f},s=Array.from(p);for(let[e,s]of(h.clear(),p.clear(),f.history="replace",f.scroll=!1,f.shallow=!0,f.throttleMs=50,l("[nuqs queue] Flushing queue %O with options %O",r,n),r))null===s?t.delete(e):t.set(e,s);try{let r=window.next?.router;if("string"==typeof r?.state?.asPath){let e=d(r.state.asPath.split("?")[0]??"",t);l("[nuqs queue (pages)] Updating url: %s",e),("push"===n.history?r.push:r.replace).call(r,e,e,{scroll:n.scroll,shallow:n.shallow})}else{let r=d(location.origin+location.pathname,t);l("[nuqs queue (app)] Updating url: %s",r),("push"===n.history?history.pushState:history.replaceState).call(history,history.state,S,r),n.scroll&&window.scrollTo(0,0),n.shallow||function(e,t){let r=n=>{if(n===e.length)return t();let l=e[n];if(!l)throw Error("Invalid transition function");l(()=>r(n+1))};r(0)}(s,()=>{e.replace(r,{scroll:!1,shallow:!1})})}return[t,null]}catch(e){return console.error(i(429),r.map(([e])=>e).join(),e),[t,e]}}(N);null===n?e(r):t(r),y=null}setTimeout(function(){let e=performance.now()-g,t=f.throttleMs,n=Math.max(0,Math.min(t,t-e));l("[nuqs queue] Scheduling flush in %f ms. Throttled at %f ms",n,t),0===n?r():setTimeout(r,n)},0)})),y},[e,t,r,n,a,v]);return[M??_??null,P]}"object"==typeof history&&function(){let e="1.15.4",t=history.__nuqs_patched;if(t){t!==e&&console.error(i(409),t,e);return}for(let t of(l("[nuqs] Patching history with %s",e),["pushState","replaceState"])){let e=history[t].bind(history);history[t]=function(r,n,s){if(!s)return l("[nuqs] history.%s(null) (%s) %O",t,n,r),e(r,n,s);let a=n===S?"internal":"external",o=new URL(s,location.origin).searchParams;if(l("[nuqs] history.%s(%s) (%s) %O",t,s,a,r),"external"===a){for(let[e,t]of o.entries()){let r=m(e);null!==r&&r!==t&&(l("[nuqs] Overwrite detected for key: %s, Server: %s, queue: %s",e,t,r),o.set(e,r))}setTimeout(()=>{l("[nuqs] External history.%s call: triggering sync with %s",t,o),b.emit(w,o),b.emit(q,{search:o,source:a})},0)}else setTimeout(()=>{b.emit(q,{search:o,source:a})},0);return e(r,n===S?"":n,s)}}Object.defineProperty(history,"__nuqs_patched",{value:e,writable:!1,enumerable:!1,configurable:!1})}()}};